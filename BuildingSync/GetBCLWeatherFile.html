<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: BuildingSync::GetBCLWeatherFile
  
    &mdash; Documentation by YARD 0.9.34
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "BuildingSync::GetBCLWeatherFile";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (G)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../BuildingSync.html" title="BuildingSync (module)">BuildingSync</a></span></span>
     &raquo; 
    <span class="title">GetBCLWeatherFile</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: BuildingSync::GetBCLWeatherFile
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">BuildingSync::GetBCLWeatherFile</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/buildingsync/get_bcl_weather_file.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>GetBCLWeatherFile class to manage the process of getting weather files from BCL</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#city_found_in_json_data-instance_method" title="#city_found_in_json_data (instance method)">#<strong>city_found_in_json_data</strong>(city)  &#x21d2; array&lt;boolean, int&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>city found in JSON data.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_ddy_file-instance_method" title="#create_ddy_file (instance method)">#<strong>create_ddy_file</strong>(idf_path_collection, epw_path)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>create design day file (ddy).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#download_design_day_file-instance_method" title="#download_design_day_file (instance method)">#<strong>download_design_day_file</strong>(wmo_no, epw_path)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>download design day file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#download_weather_file-instance_method" title="#download_weather_file (instance method)">#<strong>download_weather_file</strong>(remote, choices)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>download weather file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#download_weather_file_from_city_name-instance_method" title="#download_weather_file_from_city_name (instance method)">#<strong>download_weather_file_from_city_name</strong>(state, city)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>download weather file from city name.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#download_weather_file_from_weather_id-instance_method" title="#download_weather_file_from_weather_id (instance method)">#<strong>download_weather_file_from_weather_id</strong>(weather_id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>download weather file from weather id.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_response_from_given_state-instance_method" title="#find_response_from_given_state (instance method)">#<strong>find_response_from_given_state</strong>(responses, state)  &#x21d2; BCLSearchResult </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>find response from given state.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_weather_counter-instance_method" title="#find_weather_counter (instance method)">#<strong>find_weather_counter</strong>(weather_id)  &#x21d2; array&lt;boolean, int&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>check if weather ID is found in JSON data.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_weather_file_from_city-instance_method" title="#get_weather_file_from_city (instance method)">#<strong>get_weather_file_from_city</strong>(city)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>get weather file from city.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_weather_file_from_weather_id-instance_method" title="#get_weather_file_from_weather_id (instance method)">#<strong>get_weather_file_from_weather_id</strong>(weather_id)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>get weather file from weather ID.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>  &#x21d2; GetBCLWeatherFile </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of GetBCLWeatherFile.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="BuildingSync::GetBCLWeatherFile (class)">GetBCLWeatherFile</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a new instance of GetBCLWeatherFile.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/get_bcl_weather_file.rb', line 46</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>
  <span class='comment'># prefix for data weather path
</span>  <span class='ivar'>@weather_file_path_prefix</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../top-level-namespace.html#WEATHER_DIR-constant" title="WEATHER_DIR (constant)">WEATHER_DIR</a></span></span>
  <span class='ivar'>@weather_file</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='ivar'>@weather_file_path_prefix</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>weather_file.json</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='comment'># Above structured as {&quot;weather_file_name&quot;:[],&quot;city_name&quot;:[],&quot;state_code&quot;:[],&quot;weather_id&quot;:[]}
</span>
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_mkdir_p'>mkdir_p</span><span class='lparen'>(</span><span class='ivar'>@weather_file_path_prefix</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='ivar'>@weather_file</span><span class='rparen'>)</span>
    <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='ivar'>@weather_file</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
      <span class='ivar'>@weather_json</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='comma'>,</span> <span class='label'>symbolize_names:</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_arr'>arr</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='ivar'>@weather_json</span> <span class='op'>=</span> <span class='lbrace'>{</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>weather_file_name</span><span class='label_end'>&#39;:</span> <span class='id identifier rubyid_arr'>arr</span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>city_name</span><span class='label_end'>&#39;:</span> <span class='id identifier rubyid_arr'>arr</span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>state_code</span><span class='label_end'>&#39;:</span> <span class='id identifier rubyid_arr'>arr</span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>weather_id</span><span class='label_end'>&#39;:</span> <span class='id identifier rubyid_arr'>arr</span>
    <span class='rbrace'>}</span>
    <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='ivar'>@weather_file</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='ivar'>@weather_json</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="city_found_in_json_data-instance_method">
  
    #<strong>city_found_in_json_data</strong>(city)  &#x21d2; <tt>array&lt;boolean, int&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>city found in JSON data</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>city</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>array&lt;boolean, int&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


296
297
298
299
300
301
302
303
304
305</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/get_bcl_weather_file.rb', line 296</span>

<span class='kw'>def</span> <span class='id identifier rubyid_city_found_in_json_data'>city_found_in_json_data</span><span class='lparen'>(</span><span class='id identifier rubyid_city'>city</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_counter'>counter</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@weather_json</span><span class='lbracket'>[</span><span class='symbol'>:city_name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_cname'>cname</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_cname'>cname</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_city'>city</span>
      <span class='kw'>return</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='id identifier rubyid_counter'>counter</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_counter'>counter</span> <span class='op'>+=</span> <span class='int'>1</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='id identifier rubyid_counter'>counter</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_ddy_file-instance_method">
  
    #<strong>create_ddy_file</strong>(idf_path_collection, epw_path)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>create design day file (ddy)</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>idf_path_collection</span>
      
      
        <span class='type'>(<tt>array&lt;string&gt;</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>epw_path</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/get_bcl_weather_file.rb', line 241</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_ddy_file'>create_ddy_file</span><span class='lparen'>(</span><span class='id identifier rubyid_idf_path_collection'>idf_path_collection</span><span class='comma'>,</span> <span class='id identifier rubyid_epw_path'>epw_path</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_idf_file_lines'>idf_file_lines</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_idf_path_collection'>idf_path_collection</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_idf_file_path'>idf_file_path</span><span class='op'>|</span>
    <span class='id identifier rubyid_idf_file'>idf_file</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_idf_file_path'>idf_file_path</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_idf_file_lines'>idf_file_lines</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_idf_file'>idf_file</span><span class='period'>.</span><span class='id identifier rubyid_readlines'>readlines</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_design_day_path'>design_day_path</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='lparen'>(</span><span class='id identifier rubyid_epw_path'>epw_path</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_weather_file_name'>weather_file_name</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='lparen'>(</span><span class='id identifier rubyid_epw_path'>epw_path</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.*</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_design_day_file'>design_day_file</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_design_day_path'>design_day_path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_weather_file_name'>weather_file_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.ddy</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

  <span class='id identifier rubyid_idf_file_lines'>idf_file_lines</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span>
    <span class='id identifier rubyid_design_day_file'>design_day_file</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span><span class='lparen'>(</span><span class='id identifier rubyid_line'>line</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_design_day_file'>design_day_file</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="download_design_day_file-instance_method">
  
    #<strong>download_design_day_file</strong>(wmo_no, epw_path)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>download design day file</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>wmo_no</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>epw_path</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/get_bcl_weather_file.rb', line 196</span>

<span class='kw'>def</span> <span class='id identifier rubyid_download_design_day_file'>download_design_day_file</span><span class='lparen'>(</span><span class='id identifier rubyid_wmo_no'>wmo_no</span><span class='comma'>,</span> <span class='id identifier rubyid_epw_path'>epw_path</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_remote'>remote</span> <span class='op'>=</span> <span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>RemoteBCL</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_responses'>responses</span> <span class='op'>=</span> <span class='id identifier rubyid_remote'>remote</span><span class='period'>.</span><span class='id identifier rubyid_searchComponentLibrary'>searchComponentLibrary</span><span class='lparen'>(</span><span class='id identifier rubyid_wmo_no'>wmo_no</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>6</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Design Day</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_choices'>choices</span> <span class='op'>=</span> <span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>StringVector</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

  <span class='id identifier rubyid_idf_path_collection'>idf_path_collection</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_responses'>responses</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_response'>response</span><span class='op'>|</span>
    <span class='id identifier rubyid_choices'>choices</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_uid'>uid</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_choices'>choices</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_uid'>uid</span><span class='op'>|</span>
    <span class='id identifier rubyid_remote'>remote</span><span class='period'>.</span><span class='id identifier rubyid_downloadComponent'>downloadComponent</span><span class='lparen'>(</span><span class='id identifier rubyid_uid'>uid</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_component'>component</span> <span class='op'>=</span> <span class='id identifier rubyid_remote'>remote</span><span class='period'>.</span><span class='id identifier rubyid_waitForComponentDownload'>waitForComponentDownload</span>

    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_component'>component</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

      <span class='id identifier rubyid_component'>component</span> <span class='op'>=</span> <span class='id identifier rubyid_component'>component</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span>

      <span class='id identifier rubyid_files'>files</span> <span class='op'>=</span> <span class='id identifier rubyid_component'>component</span><span class='period'>.</span><span class='id identifier rubyid_files'>files</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>idf</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

      <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_files'>files</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='id identifier rubyid_idf_path_collection'>idf_path_collection</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_component'>component</span><span class='period'>.</span><span class='id identifier rubyid_files'>files</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>idf</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Error</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.GetBCLWeatherFile.download_design_day_file</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                           <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Error, cannot find the design day file within the downloaded zip container with uid: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uid'>uid</span><span class='embexpr_end'>}</span><span class='tstring_content'>.  Please try a different weather file.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

        <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Error, cannot find the design day file within the downloaded zip container with uid: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uid'>uid</span><span class='embexpr_end'>}</span><span class='tstring_content'>.  Please try a different weather file.</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Error</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.GetBCLWeatherFile.download_design_day_file</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                         <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Error, cannot find local component for: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uid'>uid</span><span class='embexpr_end'>}</span><span class='tstring_content'>.  Please try a different weather file.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Error, cannot find local component for: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uid'>uid</span><span class='embexpr_end'>}</span><span class='tstring_content'>.  Please try a different weather file.</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Successfully downloaded ddy file to </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_epw_path'>epw_path</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_create_ddy_file'>create_ddy_file</span><span class='lparen'>(</span><span class='id identifier rubyid_idf_path_collection'>idf_path_collection</span><span class='comma'>,</span> <span class='id identifier rubyid_epw_path'>epw_path</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Successfully combined design day files to ddy file in </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_epw_path'>epw_path</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="download_weather_file-instance_method">
  
    #<strong>download_weather_file</strong>(remote, choices)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>download weather file</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>remote</span>
      
      
        <span class='type'>(<tt>OpenStudio::RemoteBCL</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>choices</span>
      
      
        <span class='type'>(<tt>OpenStudio::StringVector</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>string</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/get_bcl_weather_file.rb', line 154</span>

<span class='kw'>def</span> <span class='id identifier rubyid_download_weather_file'>download_weather_file</span><span class='lparen'>(</span><span class='id identifier rubyid_remote'>remote</span><span class='comma'>,</span> <span class='id identifier rubyid_choices'>choices</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_epw_path'>epw_path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>

  <span class='id identifier rubyid_choices'>choices</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_uid'>uid</span><span class='op'>|</span>
    <span class='id identifier rubyid_remote'>remote</span><span class='period'>.</span><span class='id identifier rubyid_downloadComponent'>downloadComponent</span><span class='lparen'>(</span><span class='id identifier rubyid_uid'>uid</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_component'>component</span> <span class='op'>=</span> <span class='id identifier rubyid_remote'>remote</span><span class='period'>.</span><span class='id identifier rubyid_waitForComponentDownload'>waitForComponentDownload</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_component'>component</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
      <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Error</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.GetBCLWeatherFile.download_weather_file</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                         <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Error, cannot find the EPW weather file with uid: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uid'>uid</span><span class='embexpr_end'>}</span><span class='tstring_content'>.  Please try a different weather file.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>return</span> <span class='kw'>false</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_component'>component</span> <span class='op'>=</span> <span class='id identifier rubyid_component'>component</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span>

    <span class='id identifier rubyid_files'>files</span> <span class='op'>=</span> <span class='id identifier rubyid_component'>component</span><span class='period'>.</span><span class='id identifier rubyid_files'>files</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>epw</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_files'>files</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
      <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Error</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.GetBCLWeatherFile.download_weather_file</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                         <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Error, cannot find the EPW weather file within the downloaded zip container with uid: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uid'>uid</span><span class='embexpr_end'>}</span><span class='tstring_content'>.  Please try a different weather file.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>return</span> <span class='kw'>false</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_epw_weather_file_path'>epw_weather_file_path</span> <span class='op'>=</span> <span class='id identifier rubyid_component'>component</span><span class='period'>.</span><span class='id identifier rubyid_files'>files</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>epw</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_dir_path'>dir_path</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='lparen'>(</span><span class='id identifier rubyid_epw_weather_file_path'>epw_weather_file_path</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_weather_file_name'>weather_file_name</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='lparen'>(</span><span class='id identifier rubyid_epw_weather_file_path'>epw_weather_file_path</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_epw_path'>epw_path</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_expand_path'>expand_path</span><span class='lparen'>(</span><span class='ivar'>@weather_file_path_prefix</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='lparen'>(</span><span class='kw'>__FILE__</span><span class='rparen'>)</span><span class='rparen'>)</span>

    <span class='const'>Dir</span><span class='period'>.</span><span class='id identifier rubyid_glob'>glob</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_dir_path'>dir_path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/**/*.*</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_filename'>filename</span><span class='op'>|</span>
      <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_mv'>mv</span><span class='lparen'>(</span><span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='id identifier rubyid_epw_path'>epw_path</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_epw_path'>epw_path</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_expand_path'>expand_path</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@weather_file_path_prefix</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_weather_file_name'>weather_file_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='lparen'>(</span><span class='kw'>__FILE__</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Successfully set weather file to </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_epw_path'>epw_path</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>return</span> <span class='id identifier rubyid_epw_path'>epw_path</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="download_weather_file_from_city_name-instance_method">
  
    #<strong>download_weather_file_from_city_name</strong>(state, city)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>download weather file from city name</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>state</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>city</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>c</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>string</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/get_bcl_weather_file.rb', line 73</span>

<span class='kw'>def</span> <span class='id identifier rubyid_download_weather_file_from_city_name'>download_weather_file_from_city_name</span><span class='lparen'>(</span><span class='id identifier rubyid_state'>state</span><span class='comma'>,</span> <span class='id identifier rubyid_city'>city</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_weather_file_name'>weather_file_name</span> <span class='op'>=</span> <span class='id identifier rubyid_get_weather_file_from_city'>get_weather_file_from_city</span><span class='lparen'>(</span><span class='id identifier rubyid_city'>city</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_weather_file_name'>weather_file_name</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='kw'>return</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='ivar'>@weather_file_path_prefix</span><span class='comma'>,</span> <span class='id identifier rubyid_weather_file_name'>weather_file_name</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_wmo_no'>wmo_no</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_remote'>remote</span> <span class='op'>=</span> <span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>RemoteBCL</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

    <span class='comment'># Search for weather files
</span>    <span class='id identifier rubyid_responses'>responses</span> <span class='op'>=</span> <span class='id identifier rubyid_remote'>remote</span><span class='period'>.</span><span class='id identifier rubyid_searchComponentLibrary'>searchComponentLibrary</span><span class='lparen'>(</span><span class='id identifier rubyid_city'>city</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Weather File</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_choices'>choices</span> <span class='op'>=</span> <span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>StringVector</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

    <span class='id identifier rubyid_filter_response'>filter_response</span> <span class='op'>=</span> <span class='id identifier rubyid_find_response_from_given_state'>find_response_from_given_state</span><span class='lparen'>(</span><span class='id identifier rubyid_responses'>responses</span><span class='comma'>,</span> <span class='id identifier rubyid_state'>state</span><span class='rparen'>)</span>

    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_filter_response'>filter_response</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='id identifier rubyid_choices'>choices</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_filter_response'>filter_response</span><span class='period'>.</span><span class='id identifier rubyid_uid'>uid</span>
      <span class='id identifier rubyid_filter_response'>filter_response</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_attribute'>attribute</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_attribute'>attribute</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>WMO</span><span class='tstring_end'>&#39;</span></span>
          <span class='id identifier rubyid_wmo_no'>wmo_no</span> <span class='op'>=</span> <span class='id identifier rubyid_attribute'>attribute</span><span class='period'>.</span><span class='id identifier rubyid_valueAsDouble'>valueAsDouble</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_choices'>choices</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span> <span class='op'>==</span> <span class='int'>0</span>
      <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Error</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.GetBCLWeatherFile.download_weather_file_from_city_name</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                         <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Error, could not find uid for state </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_state'>state</span><span class='embexpr_end'>}</span><span class='tstring_content'> and city </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_city'>city</span><span class='embexpr_end'>}</span><span class='tstring_content'>. Initial count of weather files: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_responses'>responses</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span><span class='embexpr_end'>}</span><span class='tstring_content'>. Please try a different weather file.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>return</span> <span class='kw'>false</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_epw_path'>epw_path</span> <span class='op'>=</span> <span class='id identifier rubyid_download_weather_file'>download_weather_file</span><span class='lparen'>(</span><span class='id identifier rubyid_remote'>remote</span><span class='comma'>,</span> <span class='id identifier rubyid_choices'>choices</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_download_design_day_file'>download_design_day_file</span><span class='lparen'>(</span><span class='id identifier rubyid_wmo_no'>wmo_no</span><span class='comma'>,</span> <span class='id identifier rubyid_epw_path'>epw_path</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_epw_path'>epw_path</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="download_weather_file_from_weather_id-instance_method">
  
    #<strong>download_weather_file_from_weather_id</strong>(weather_id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>download weather file from weather id</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>weather_id</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>string</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/get_bcl_weather_file.rb', line 112</span>

<span class='kw'>def</span> <span class='id identifier rubyid_download_weather_file_from_weather_id'>download_weather_file_from_weather_id</span><span class='lparen'>(</span><span class='id identifier rubyid_weather_id'>weather_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_weather_file_name'>weather_file_name</span> <span class='op'>=</span> <span class='id identifier rubyid_get_weather_file_from_weather_id'>get_weather_file_from_weather_id</span><span class='lparen'>(</span><span class='id identifier rubyid_weather_id'>weather_id</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_weather_file_name'>weather_file_name</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='kw'>return</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='ivar'>@weather_file_path_prefix</span><span class='comma'>,</span> <span class='id identifier rubyid_weather_file_name'>weather_file_name</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_wmo_no'>wmo_no</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_remote'>remote</span> <span class='op'>=</span> <span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>RemoteBCL</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

    <span class='comment'># Search for weather files
</span>    <span class='id identifier rubyid_responses'>responses</span> <span class='op'>=</span> <span class='id identifier rubyid_remote'>remote</span><span class='period'>.</span><span class='id identifier rubyid_searchComponentLibrary'>searchComponentLibrary</span><span class='lparen'>(</span><span class='id identifier rubyid_weather_id'>weather_id</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Weather File</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

    <span class='id identifier rubyid_choices'>choices</span> <span class='op'>=</span> <span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>StringVector</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

    <span class='id identifier rubyid_responses'>responses</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_response'>response</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>TMY3</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_choices'>choices</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_uid'>uid</span>

        <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_attribute'>attribute</span><span class='op'>|</span>
          <span class='kw'>if</span> <span class='id identifier rubyid_attribute'>attribute</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>WMO</span><span class='tstring_end'>&#39;</span></span>
            <span class='id identifier rubyid_wmo_no'>wmo_no</span> <span class='op'>=</span> <span class='id identifier rubyid_attribute'>attribute</span><span class='period'>.</span><span class='id identifier rubyid_valueAsDouble'>valueAsDouble</span>
          <span class='kw'>end</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_choices'>choices</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span> <span class='op'>==</span> <span class='int'>0</span>
      <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Error</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.GetBCLWeatherFile.download_weather_file_from_weather_id</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                         <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Error, could not find uid for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_weather_id'>weather_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>.  Please try a different weather file.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>return</span> <span class='kw'>false</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_epw_path'>epw_path</span> <span class='op'>=</span> <span class='id identifier rubyid_download_weather_file'>download_weather_file</span><span class='lparen'>(</span><span class='id identifier rubyid_remote'>remote</span><span class='comma'>,</span> <span class='id identifier rubyid_choices'>choices</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_download_design_day_file'>download_design_day_file</span><span class='lparen'>(</span><span class='id identifier rubyid_wmo_no'>wmo_no</span><span class='comma'>,</span> <span class='id identifier rubyid_epw_path'>epw_path</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_epw_path'>epw_path</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_response_from_given_state-instance_method">
  
    #<strong>find_response_from_given_state</strong>(responses, state)  &#x21d2; <tt>BCLSearchResult</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>find response from given state</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>responses</span>
      
      
        <span class='type'>(<tt>array&lt;BCLSearchResult&gt;</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>state</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>BCLSearchResult</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


311
312
313
314
315
316
317
318
319
320
321
322
323
324</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/get_bcl_weather_file.rb', line 311</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_response_from_given_state'>find_response_from_given_state</span><span class='lparen'>(</span><span class='id identifier rubyid_responses'>responses</span><span class='comma'>,</span> <span class='id identifier rubyid_state'>state</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_responses'>responses</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_response'>response</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>TMY3</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_attribute'>attribute</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_attribute'>attribute</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>State</span><span class='tstring_end'>&#39;</span></span>
          <span class='kw'>if</span> <span class='id identifier rubyid_attribute'>attribute</span><span class='period'>.</span><span class='id identifier rubyid_valueAsString'>valueAsString</span> <span class='op'>==</span> <span class='id identifier rubyid_state'>state</span>
            <span class='kw'>return</span> <span class='id identifier rubyid_response'>response</span>
          <span class='kw'>end</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_weather_counter-instance_method">
  
    #<strong>find_weather_counter</strong>(weather_id)  &#x21d2; <tt>array&lt;boolean, int&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>check if weather ID is found in JSON data</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>weather_id</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>array&lt;boolean, int&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


272
273
274
275
276
277
278
279
280
281</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/get_bcl_weather_file.rb', line 272</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_weather_counter'>find_weather_counter</span><span class='lparen'>(</span><span class='id identifier rubyid_weather_id'>weather_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_counter'>counter</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@weather_json</span><span class='lbracket'>[</span><span class='symbol'>:weather_id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_cname'>cname</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_cname'>cname</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_weather_id'>weather_id</span>
      <span class='kw'>return</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='id identifier rubyid_counter'>counter</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_counter'>counter</span> <span class='op'>+=</span> <span class='int'>1</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='id identifier rubyid_counter'>counter</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_weather_file_from_city-instance_method">
  
    #<strong>get_weather_file_from_city</strong>(city)  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>get weather file from city</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>city</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


286
287
288
289
290
291</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/get_bcl_weather_file.rb', line 286</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_weather_file_from_city'>get_weather_file_from_city</span><span class='lparen'>(</span><span class='id identifier rubyid_city'>city</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_weather_file_name'>weather_file_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_is_found'>is_found</span><span class='comma'>,</span> <span class='id identifier rubyid_counter'>counter</span> <span class='op'>=</span> <span class='id identifier rubyid_city_found_in_json_data'>city_found_in_json_data</span><span class='lparen'>(</span><span class='id identifier rubyid_city'>city</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_weather_file_name'>weather_file_name</span> <span class='op'>=</span> <span class='ivar'>@weather_json</span><span class='lbracket'>[</span><span class='symbol'>:weather_file_name</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_counter'>counter</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_is_found'>is_found</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_weather_file_name'>weather_file_name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_weather_file_from_weather_id-instance_method">
  
    #<strong>get_weather_file_from_weather_id</strong>(weather_id)  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>get weather file from weather ID</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>weather_id</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


262
263
264
265
266
267</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/get_bcl_weather_file.rb', line 262</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_weather_file_from_weather_id'>get_weather_file_from_weather_id</span><span class='lparen'>(</span><span class='id identifier rubyid_weather_id'>weather_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_weather_file_name'>weather_file_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_is_found'>is_found</span><span class='comma'>,</span> <span class='id identifier rubyid_counter'>counter</span> <span class='op'>=</span> <span class='id identifier rubyid_find_weather_counter'>find_weather_counter</span><span class='lparen'>(</span><span class='id identifier rubyid_weather_id'>weather_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_weather_file_name'>weather_file_name</span> <span class='op'>=</span> <span class='ivar'>@weather_json</span><span class='lbracket'>[</span><span class='symbol'>:weather_file_name</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_counter'>counter</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_is_found'>is_found</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_weather_file_name'>weather_file_name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Wed Feb  7 00:25:40 2024 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.34 (ruby-2.7.8).
</div>

    </div>
  </body>
</html>