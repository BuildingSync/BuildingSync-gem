<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: BuildingSync::LoadsSystem
  
    &mdash; Documentation by YARD 0.9.26
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "BuildingSync::LoadsSystem";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (L)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../BuildingSync.html" title="BuildingSync (module)">BuildingSync</a></span></span>
     &raquo; 
    <span class="title">LoadsSystem</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: BuildingSync::LoadsSystem
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="BuildingSystem.html" title="BuildingSync::BuildingSystem (class)">BuildingSystem</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next"><span class='object_link'><a href="BuildingSystem.html" title="BuildingSync::BuildingSystem (class)">BuildingSystem</a></span></li>
          
            <li class="next">BuildingSync::LoadsSystem</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="Helper.html" title="BuildingSync::Helper (module)">Helper</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/buildingsync/model_articulation/loads_system.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>LoadsSystem class that manages internal and external loads</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_elevator-instance_method" title="#add_elevator (instance method)">#<strong>add_elevator</strong>(model, standard)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>add elevator.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_internal_loads-instance_method" title="#add_internal_loads (instance method)">#<strong>add_internal_loads</strong>(model, standard, template, building_sections, remove_objects)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>add internal loads from standard definitions.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#adjust_occupancy_peak-instance_method" title="#adjust_occupancy_peak (instance method)">#<strong>adjust_occupancy_peak</strong>(model, new_occupancy_peak, area, space_types)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>add occupancy peak.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#adjust_schedules-instance_method" title="#adjust_schedules (instance method)">#<strong>adjust_schedules</strong>(standard, space_type, building_occupant_hours_per_week, model)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>adjust schedules.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_building_occupancy_hours-instance_method" title="#get_building_occupancy_hours (instance method)">#<strong>get_building_occupancy_hours</strong>(building_sections)  &#x21d2; Float </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>get building occupancy hours.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(system_element = &#39;&#39;, ns = &#39;&#39;)  &#x21d2; LoadsSystem </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>initialize.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Helper.html" title="BuildingSync::Helper (module)">Helper</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Helper.html#help_calculate_hours-instance_method" title="BuildingSync::Helper#help_calculate_hours (method)">#help_calculate_hours</a></span>, <span class='object_link'><a href="Helper.html#help_convert-instance_method" title="BuildingSync::Helper#help_convert (method)">#help_convert</a></span>, <span class='object_link'><a href="Helper.html#help_count_number_of_days-instance_method" title="BuildingSync::Helper#help_count_number_of_days (method)">#help_count_number_of_days</a></span>, <span class='object_link'><a href="Helper.html#help_element_class_type_check-instance_method" title="BuildingSync::Helper#help_element_class_type_check (method)">#help_element_class_type_check</a></span>, <span class='object_link'><a href="Helper.html#help_get_attribute_value-instance_method" title="BuildingSync::Helper#help_get_attribute_value (method)">#help_get_attribute_value</a></span>, <span class='object_link'><a href="Helper.html#help_get_default_schedule_set-instance_method" title="BuildingSync::Helper#help_get_default_schedule_set (method)">#help_get_default_schedule_set</a></span>, <span class='object_link'><a href="Helper.html#help_get_duration-instance_method" title="BuildingSync::Helper#help_get_duration (method)">#help_get_duration</a></span>, <span class='object_link'><a href="Helper.html#help_get_end_time-instance_method" title="BuildingSync::Helper#help_get_end_time (method)">#help_get_end_time</a></span>, <span class='object_link'><a href="Helper.html#help_get_end_time_sat-instance_method" title="BuildingSync::Helper#help_get_end_time_sat (method)">#help_get_end_time_sat</a></span>, <span class='object_link'><a href="Helper.html#help_get_end_time_sun-instance_method" title="BuildingSync::Helper#help_get_end_time_sun (method)">#help_get_end_time_sun</a></span>, <span class='object_link'><a href="Helper.html#help_get_end_time_weekday-instance_method" title="BuildingSync::Helper#help_get_end_time_weekday (method)">#help_get_end_time_weekday</a></span>, <span class='object_link'><a href="Helper.html#help_get_or_create-instance_method" title="BuildingSync::Helper#help_get_or_create (method)">#help_get_or_create</a></span>, <span class='object_link'><a href="Helper.html#help_get_schedule_rule_set_from_schedule-instance_method" title="BuildingSync::Helper#help_get_schedule_rule_set_from_schedule (method)">#help_get_schedule_rule_set_from_schedule</a></span>, <span class='object_link'><a href="Helper.html#help_get_start_time-instance_method" title="BuildingSync::Helper#help_get_start_time (method)">#help_get_start_time</a></span>, <span class='object_link'><a href="Helper.html#help_get_start_time_sat-instance_method" title="BuildingSync::Helper#help_get_start_time_sat (method)">#help_get_start_time_sat</a></span>, <span class='object_link'><a href="Helper.html#help_get_start_time_sun-instance_method" title="BuildingSync::Helper#help_get_start_time_sun (method)">#help_get_start_time_sun</a></span>, <span class='object_link'><a href="Helper.html#help_get_start_time_weekday-instance_method" title="BuildingSync::Helper#help_get_start_time_weekday (method)">#help_get_start_time_weekday</a></span>, <span class='object_link'><a href="Helper.html#help_get_text_value-instance_method" title="BuildingSync::Helper#help_get_text_value (method)">#help_get_text_value</a></span>, <span class='object_link'><a href="Helper.html#help_get_text_value_as_bool-instance_method" title="BuildingSync::Helper#help_get_text_value_as_bool (method)">#help_get_text_value_as_bool</a></span>, <span class='object_link'><a href="Helper.html#help_get_text_value_as_date-instance_method" title="BuildingSync::Helper#help_get_text_value_as_date (method)">#help_get_text_value_as_date</a></span>, <span class='object_link'><a href="Helper.html#help_get_text_value_as_datetime-instance_method" title="BuildingSync::Helper#help_get_text_value_as_datetime (method)">#help_get_text_value_as_datetime</a></span>, <span class='object_link'><a href="Helper.html#help_get_text_value_as_float-instance_method" title="BuildingSync::Helper#help_get_text_value_as_float (method)">#help_get_text_value_as_float</a></span>, <span class='object_link'><a href="Helper.html#help_get_text_value_as_integer-instance_method" title="BuildingSync::Helper#help_get_text_value_as_integer (method)">#help_get_text_value_as_integer</a></span>, <span class='object_link'><a href="Helper.html#help_get_zone_name_list-instance_method" title="BuildingSync::Helper#help_get_zone_name_list (method)">#help_get_zone_name_list</a></span>, <span class='object_link'><a href="Helper.html#help_load_doc-instance_method" title="BuildingSync::Helper#help_load_doc (method)">#help_load_doc</a></span>, <span class='object_link'><a href="Helper.html#help_print_all_schedules-instance_method" title="BuildingSync::Helper#help_print_all_schedules (method)">#help_print_all_schedules</a></span>, <span class='object_link'><a href="Helper.html#help_print_schedule-instance_method" title="BuildingSync::Helper#help_print_schedule (method)">#help_print_schedule</a></span>, <span class='object_link'><a href="Helper.html#help_write_profile-instance_method" title="BuildingSync::Helper#help_write_profile (method)">#help_write_profile</a></span></p>

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="XmlGetSet.html" title="BuildingSync::XmlGetSet (module)">XmlGetSet</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="XmlGetSet.html#get_prefix-instance_method" title="BuildingSync::XmlGetSet#get_prefix (method)">#get_prefix</a></span>, <span class='object_link'><a href="XmlGetSet.html#xget_attribute_for_element-instance_method" title="BuildingSync::XmlGetSet#xget_attribute_for_element (method)">#xget_attribute_for_element</a></span>, <span class='object_link'><a href="XmlGetSet.html#xget_element-instance_method" title="BuildingSync::XmlGetSet#xget_element (method)">#xget_element</a></span>, <span class='object_link'><a href="XmlGetSet.html#xget_id-instance_method" title="BuildingSync::XmlGetSet#xget_id (method)">#xget_id</a></span>, <span class='object_link'><a href="XmlGetSet.html#xget_idrefs-instance_method" title="BuildingSync::XmlGetSet#xget_idrefs (method)">#xget_idrefs</a></span>, <span class='object_link'><a href="XmlGetSet.html#xget_linked_premises-instance_method" title="BuildingSync::XmlGetSet#xget_linked_premises (method)">#xget_linked_premises</a></span>, <span class='object_link'><a href="XmlGetSet.html#xget_name-instance_method" title="BuildingSync::XmlGetSet#xget_name (method)">#xget_name</a></span>, <span class='object_link'><a href="XmlGetSet.html#xget_or_create-instance_method" title="BuildingSync::XmlGetSet#xget_or_create (method)">#xget_or_create</a></span>, <span class='object_link'><a href="XmlGetSet.html#xget_plurals_text_value-instance_method" title="BuildingSync::XmlGetSet#xget_plurals_text_value (method)">#xget_plurals_text_value</a></span>, <span class='object_link'><a href="XmlGetSet.html#xget_text-instance_method" title="BuildingSync::XmlGetSet#xget_text (method)">#xget_text</a></span>, <span class='object_link'><a href="XmlGetSet.html#xget_text_as_bool-instance_method" title="BuildingSync::XmlGetSet#xget_text_as_bool (method)">#xget_text_as_bool</a></span>, <span class='object_link'><a href="XmlGetSet.html#xget_text_as_date-instance_method" title="BuildingSync::XmlGetSet#xget_text_as_date (method)">#xget_text_as_date</a></span>, <span class='object_link'><a href="XmlGetSet.html#xget_text_as_dt-instance_method" title="BuildingSync::XmlGetSet#xget_text_as_dt (method)">#xget_text_as_dt</a></span>, <span class='object_link'><a href="XmlGetSet.html#xget_text_as_float-instance_method" title="BuildingSync::XmlGetSet#xget_text_as_float (method)">#xget_text_as_float</a></span>, <span class='object_link'><a href="XmlGetSet.html#xget_text_as_integer-instance_method" title="BuildingSync::XmlGetSet#xget_text_as_integer (method)">#xget_text_as_integer</a></span>, <span class='object_link'><a href="XmlGetSet.html#xset_or_create-instance_method" title="BuildingSync::XmlGetSet#xset_or_create (method)">#xset_or_create</a></span>, <span class='object_link'><a href="XmlGetSet.html#xset_text-instance_method" title="BuildingSync::XmlGetSet#xset_text (method)">#xset_text</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(system_element = &#39;&#39;, ns = &#39;&#39;)  &#x21d2; <tt><span class='object_link'><a href="" title="BuildingSync::LoadsSystem (class)">LoadsSystem</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>initialize</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>system_element</span>
      
      
        <span class='type'>(<tt>REXML::Element</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;&#39;</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>ns</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;&#39;</tt>)</em>
      
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


51
52
53</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/model_articulation/loads_system.rb', line 51</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_system_element'>system_element</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_ns'>ns</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='comment'># code to initialize
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="add_elevator-instance_method">
  
    #<strong>add_elevator</strong>(model, standard)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>add elevator</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>model</span>
      
      
        <span class='type'>(<tt>OpenStudio::Model</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>standard</span>
      
      
        <span class='type'>(<tt>Standard</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>boolean</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/model_articulation/loads_system.rb', line 263</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_elevator'>add_elevator</span><span class='lparen'>(</span><span class='id identifier rubyid_model'>model</span><span class='comma'>,</span> <span class='id identifier rubyid_standard'>standard</span><span class='rparen'>)</span>
  <span class='comment'># remove elevators as spaceLoads or exteriorLights
</span>  <span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_getSpaceLoads'>getSpaceLoads</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_instance'>instance</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Elevator</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='comment'># most prototype building types model exterior elevators with name Elevator
</span>
    <span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_remove'>remove</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_getExteriorLightss'>getExteriorLightss</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_ext_light'>ext_light</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_ext_light'>ext_light</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Fuel equipment</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='comment'># some prototype building types model exterior elevators by this name
</span>
    <span class='id identifier rubyid_ext_light'>ext_light</span><span class='period'>.</span><span class='id identifier rubyid_remove'>remove</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_elevators'>elevators</span> <span class='op'>=</span> <span class='id identifier rubyid_standard'>standard</span><span class='period'>.</span><span class='id identifier rubyid_model_add_elevators'>model_add_elevators</span><span class='lparen'>(</span><span class='id identifier rubyid_model'>model</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_elevators'>elevators</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Info</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.LoadsSystem.add_elevator</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>No elevators added to the building.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_elevator_def'>elevator_def</span> <span class='op'>=</span> <span class='id identifier rubyid_elevators'>elevators</span><span class='period'>.</span><span class='id identifier rubyid_electricEquipmentDefinition'>electricEquipmentDefinition</span>
    <span class='id identifier rubyid_design_level'>design_level</span> <span class='op'>=</span> <span class='id identifier rubyid_elevator_def'>elevator_def</span><span class='period'>.</span><span class='id identifier rubyid_designLevel'>designLevel</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span>
    <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Info</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.LoadsSystem.add_elevator</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Adding </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_elevators'>elevators</span><span class='period'>.</span><span class='id identifier rubyid_multiplier'>multiplier</span><span class='period'>.</span><span class='id identifier rubyid_round'>round</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> elevators each with power of </span><span class='embexpr_beg'>#{</span><span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_toNeatString'>toNeatString</span><span class='lparen'>(</span><span class='id identifier rubyid_design_level'>design_level</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> (W), plus lights and fans.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_internal_loads-instance_method">
  
    #<strong>add_internal_loads</strong>(model, standard, template, building_sections, remove_objects)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>add internal loads from standard definitions</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>model</span>
      
      
        <span class='type'>(<tt>OpenStudio::Model</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>standard</span>
      
      
        <span class='type'>(<tt>Standard</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>template</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>building_sections</span>
      
      
        <span class='type'>(<tt>REXML:Element</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>remove_objects</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/model_articulation/loads_system.rb', line 62</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_internal_loads'>add_internal_loads</span><span class='lparen'>(</span><span class='id identifier rubyid_model'>model</span><span class='comma'>,</span> <span class='id identifier rubyid_standard'>standard</span><span class='comma'>,</span> <span class='id identifier rubyid_template'>template</span><span class='comma'>,</span> <span class='id identifier rubyid_building_sections'>building_sections</span><span class='comma'>,</span> <span class='id identifier rubyid_remove_objects'>remove_objects</span><span class='rparen'>)</span>
  <span class='comment'># remove internal loads
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_remove_objects'>remove_objects</span>
    <span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_getSpaceLoads'>getSpaceLoads</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_instance'>instance</span><span class='op'>|</span>
      <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Elevator</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='comment'># most prototype building types model exterior elevators with name Elevator
</span>      <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_to_InternalMass'>to_InternalMass</span><span class='period'>.</span><span class='id identifier rubyid_is_initialized'>is_initialized</span>
      <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_to_WaterUseEquipment'>to_WaterUseEquipment</span><span class='period'>.</span><span class='id identifier rubyid_is_initialized'>is_initialized</span>

      <span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_remove'>remove</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_getDesignSpecificationOutdoorAirs'>getDesignSpecificationOutdoorAirs</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:remove</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_getDefaultScheduleSets'>getDefaultScheduleSets</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:remove</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Warn</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.LoadsSystem.add_internal_loads</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Adding internal loads</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_count_not_found'>count_not_found</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_getSpaceTypes'>getSpaceTypes</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_space_type'>space_type</span><span class='op'>|</span>
    <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_standard'>standard</span><span class='period'>.</span><span class='id identifier rubyid_space_type_get_standards_data'>space_type_get_standards_data</span><span class='lparen'>(</span><span class='id identifier rubyid_space_type'>space_type</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
      <span class='id identifier rubyid_original_building_type'>original_building_type</span> <span class='op'>=</span> <span class='id identifier rubyid_space_type'>space_type</span><span class='period'>.</span><span class='id identifier rubyid_standardsBuildingType'>standardsBuildingType</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span>
      <span class='id identifier rubyid_alternate_building_type'>alternate_building_type</span> <span class='op'>=</span> <span class='id identifier rubyid_standard'>standard</span><span class='period'>.</span><span class='id identifier rubyid_model_get_lookup_name'>model_get_lookup_name</span><span class='lparen'>(</span><span class='id identifier rubyid_original_building_type'>original_building_type</span><span class='rparen'>)</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_alternate_building_type'>alternate_building_type</span> <span class='op'>!=</span> <span class='id identifier rubyid_original_building_type'>original_building_type</span>
        <span class='id identifier rubyid_space_type'>space_type</span><span class='period'>.</span><span class='id identifier rubyid_setStandardsBuildingType'>setStandardsBuildingType</span><span class='lparen'>(</span><span class='id identifier rubyid_alternate_building_type'>alternate_building_type</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_standard'>standard</span><span class='period'>.</span><span class='id identifier rubyid_space_type_get_standards_data'>space_type_get_standards_data</span><span class='lparen'>(</span><span class='id identifier rubyid_space_type'>space_type</span><span class='rparen'>)</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
          <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Warn</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.LoadsSystem.add_internal_loads</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unable to get standards data for Space Type: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_space_type'>space_type</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.  Tried standards building type: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_original_building_type'>original_building_type</span><span class='embexpr_end'>}</span><span class='tstring_content'> and </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_alternate_building_type'>alternate_building_type</span><span class='embexpr_end'>}</span><span class='tstring_content'> with standards space type: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_space_type'>space_type</span><span class='period'>.</span><span class='id identifier rubyid_standardsSpaceType'>standardsSpaceType</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
          <span class='id identifier rubyid_count_not_found'>count_not_found</span> <span class='op'>+=</span> <span class='int'>1</span>
          <span class='kw'>next</span>
        <span class='kw'>else</span>
          <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Warn</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.LoadsSystem.add_internal_loads</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Space Type: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_space_type'>space_type</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>. Standards building type changed from </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_original_building_type'>original_building_type</span><span class='embexpr_end'>}</span><span class='tstring_content'> to </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_alternate_building_type'>alternate_building_type</span><span class='embexpr_end'>}</span><span class='tstring_content'> with standards space type: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_space_type'>space_type</span><span class='period'>.</span><span class='id identifier rubyid_standardsSpaceType'>standardsSpaceType</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='kw'>end</span>
      <span class='kw'>else</span>
        <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Warn</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.LoadsSystem.add_internal_loads</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unable to get standards data for Space Type: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_space_type'>space_type</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>.  Standards building type: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_space_type'>space_type</span><span class='period'>.</span><span class='id identifier rubyid_standardsBuildingType'>standardsBuildingType</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='embexpr_end'>}</span><span class='tstring_content'>, space type: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_space_type'>space_type</span><span class='period'>.</span><span class='id identifier rubyid_standardsSpaceType'>standardsSpaceType</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_count_not_found'>count_not_found</span> <span class='op'>+=</span> <span class='int'>1</span>
        <span class='kw'>next</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='comment'># Don&#39;t add infiltration here; will be added later in the script
</span>    <span class='id identifier rubyid_test'>test</span> <span class='op'>=</span> <span class='id identifier rubyid_standard'>standard</span><span class='period'>.</span><span class='id identifier rubyid_space_type_apply_internal_loads'>space_type_apply_internal_loads</span><span class='lparen'>(</span><span class='id identifier rubyid_space_type'>space_type</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_test'>test</span> <span class='op'>==</span> <span class='kw'>false</span>
      <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Warn</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.LoadsSystem.add_internal_loads</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Could not add loads for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_space_type'>space_type</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>. Not expected for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_template'>template</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>next</span>
    <span class='kw'>end</span>

    <span class='comment'># apply internal load schedules
</span>    <span class='comment'># the last bool test it to make thermostat schedules. They are now added in HVAC section instead of here
</span>    <span class='id identifier rubyid_success'>success</span> <span class='op'>=</span> <span class='id identifier rubyid_standard'>standard</span><span class='period'>.</span><span class='id identifier rubyid_space_type_apply_internal_load_schedules'>space_type_apply_internal_load_schedules</span><span class='lparen'>(</span><span class='id identifier rubyid_space_type'>space_type</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_success'>success</span>
      <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Warn</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.LoadsSystem.add_internal_loads</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>space_type_apply_internal_load_schedules unsuccessful for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_space_type'>space_type</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='comment'># here we adjust the people schedules according to user input of hours per week and weeks per year
</span>    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_building_sections'>building_sections</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
      <span class='id identifier rubyid_adjust_schedules'>adjust_schedules</span><span class='lparen'>(</span><span class='id identifier rubyid_standard'>standard</span><span class='comma'>,</span> <span class='id identifier rubyid_space_type'>space_type</span><span class='comma'>,</span> <span class='id identifier rubyid_get_building_occupancy_hours'>get_building_occupancy_hours</span><span class='lparen'>(</span><span class='id identifier rubyid_building_sections'>building_sections</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_model'>model</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='comment'># extend space type name to include the template. Consider this as well for load defs
</span>    <span class='id identifier rubyid_space_type'>space_type</span><span class='period'>.</span><span class='id identifier rubyid_setName'>setName</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_space_type'>space_type</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> - </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_template'>template</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Info</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.LoadsSystem.add_internal_loads</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Adding loads to space type named </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_space_type'>space_type</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_count_not_found'>count_not_found</span> <span class='op'>&gt;</span> <span class='int'>0</span>
    <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Warn</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.LoadsSystem.add_internal_loads</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_count_not_found'>count_not_found</span><span class='embexpr_end'>}</span><span class='tstring_content'> of </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_getSpaceTypes'>getSpaceTypes</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'> Space Types have no internal loads</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># warn if spaces in model without space type
</span>  <span class='id identifier rubyid_spaces_without_space_types'>spaces_without_space_types</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_getSpaces'>getSpaces</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_space'>space</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_space'>space</span><span class='period'>.</span><span class='id identifier rubyid_spaceType'>spaceType</span><span class='period'>.</span><span class='id identifier rubyid_is_initialized'>is_initialized</span>

    <span class='id identifier rubyid_spaces_without_space_types'>spaces_without_space_types</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_space'>space</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_spaces_without_space_types'>spaces_without_space_types</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Warn</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.LoadsSystem.add_internal_loads</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_spaces_without_space_types'>spaces_without_space_types</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'> spaces do not have space types assigned, and wont&#39; receive internal loads from standards space type lookups.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="adjust_occupancy_peak-instance_method">
  
    #<strong>adjust_occupancy_peak</strong>(model, new_occupancy_peak, area, space_types)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>add occupancy peak</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>model</span>
      
      
        <span class='type'>(<tt>OpenStudio::Model</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>new_occupancy_peak</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>area</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>space_types</span>
      
      
        <span class='type'>(<tt>REXML:Element</tt>)</span>
      
      
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/model_articulation/loads_system.rb', line 144</span>

<span class='kw'>def</span> <span class='id identifier rubyid_adjust_occupancy_peak'>adjust_occupancy_peak</span><span class='lparen'>(</span><span class='id identifier rubyid_model'>model</span><span class='comma'>,</span> <span class='id identifier rubyid_new_occupancy_peak'>new_occupancy_peak</span><span class='comma'>,</span> <span class='id identifier rubyid_area'>area</span><span class='comma'>,</span> <span class='id identifier rubyid_space_types'>space_types</span><span class='rparen'>)</span>
  <span class='comment'># we assume that the standard always generate people per area
</span>  <span class='id identifier rubyid_sum_of_people_per_area'>sum_of_people_per_area</span> <span class='op'>=</span> <span class='float'>0.0</span>
  <span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_space_types'>space_types</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_sorted_space_types'>sorted_space_types</span> <span class='op'>=</span> <span class='id identifier rubyid_model'>model</span><span class='period'>.</span><span class='id identifier rubyid_getSpaceTypes'>getSpaceTypes</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span>
    <span class='id identifier rubyid_sorted_space_types'>sorted_space_types</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_space_type'>space_type</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_space_types'>space_types</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_space_type'>space_type</span>
        <span class='id identifier rubyid_peoples'>peoples</span> <span class='op'>=</span> <span class='id identifier rubyid_space_type'>space_type</span><span class='period'>.</span><span class='id identifier rubyid_people'>people</span>
        <span class='id identifier rubyid_peoples'>peoples</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_people'>people</span><span class='op'>|</span>
          <span class='id identifier rubyid_sum_of_people_per_area'>sum_of_people_per_area</span> <span class='op'>+=</span> <span class='id identifier rubyid_people'>people</span><span class='period'>.</span><span class='id identifier rubyid_peoplePerFloorArea'>peoplePerFloorArea</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span>
          <span class='id identifier rubyid_count'>count</span> <span class='op'>+=</span> <span class='int'>1</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_average_people_per_area'>average_people_per_area</span> <span class='op'>=</span> <span class='id identifier rubyid_sum_of_people_per_area'>sum_of_people_per_area</span> <span class='op'>/</span> <span class='id identifier rubyid_count'>count</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>existing occupancy: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_average_people_per_area'>average_people_per_area</span><span class='embexpr_end'>}</span><span class='tstring_content'> new target value: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_new_occupancy_peak'>new_occupancy_peak</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='id identifier rubyid_area'>area</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_new_sum_of_people_per_area'>new_sum_of_people_per_area</span> <span class='op'>=</span> <span class='float'>0.0</span>
    <span class='id identifier rubyid_sorted_space_types'>sorted_space_types</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_space_type'>space_type</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_space_types'>space_types</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_space_type'>space_type</span>
        <span class='id identifier rubyid_peoples'>peoples</span> <span class='op'>=</span> <span class='id identifier rubyid_space_type'>space_type</span><span class='period'>.</span><span class='id identifier rubyid_people'>people</span>
        <span class='id identifier rubyid_peoples'>peoples</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_people'>people</span><span class='op'>|</span>
          <span class='id identifier rubyid_ratio'>ratio</span> <span class='op'>=</span> <span class='id identifier rubyid_people'>people</span><span class='period'>.</span><span class='id identifier rubyid_peoplePerFloorArea'>peoplePerFloorArea</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='id identifier rubyid_average_people_per_area'>average_people_per_area</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span>
          <span class='id identifier rubyid_new_value'>new_value</span> <span class='op'>=</span> <span class='id identifier rubyid_ratio'>ratio</span> <span class='op'>*</span> <span class='id identifier rubyid_new_occupancy_peak'>new_occupancy_peak</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='id identifier rubyid_area'>area</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span>
          <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>adjusting occupancy per area value from: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_people'>people</span><span class='period'>.</span><span class='id identifier rubyid_peoplePerFloorArea'>peoplePerFloorArea</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='embexpr_end'>}</span><span class='tstring_content'> by ratio </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ratio'>ratio</span><span class='embexpr_end'>}</span><span class='tstring_content'> to </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_new_value'>new_value</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
          <span class='id identifier rubyid_people'>people</span><span class='period'>.</span><span class='id identifier rubyid_peopleDefinition'>peopleDefinition</span><span class='period'>.</span><span class='id identifier rubyid_setPeopleperSpaceFloorArea'>setPeopleperSpaceFloorArea</span><span class='lparen'>(</span><span class='id identifier rubyid_new_value'>new_value</span><span class='rparen'>)</span>
          <span class='id identifier rubyid_new_sum_of_people_per_area'>new_sum_of_people_per_area</span> <span class='op'>+=</span> <span class='id identifier rubyid_new_value'>new_value</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>resulting total absolute occupancy value: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_new_sum_of_people_per_area'>new_sum_of_people_per_area</span> <span class='op'>*</span> <span class='id identifier rubyid_area'>area</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span><span class='embexpr_end'>}</span><span class='tstring_content'> occupancy per area value: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_new_sum_of_people_per_area'>new_sum_of_people_per_area</span> <span class='op'>/</span> <span class='id identifier rubyid_count'>count</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>space types are empty</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="adjust_schedules-instance_method">
  
    #<strong>adjust_schedules</strong>(standard, space_type, building_occupant_hours_per_week, model)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>adjust schedules</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>standard</span>
      
      
        <span class='type'>(<tt>Standard</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>space_type</span>
      
      
        <span class='type'>(<tt>OpenStudio::Model::SpaceType</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>building_occupant_hours_per_week</span>
      
      
        <span class='type'>(<tt>Float</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>model</span>
      
      
        <span class='type'>(<tt>OpenStudio::Model</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>boolean</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/model_articulation/loads_system.rb', line 204</span>

<span class='kw'>def</span> <span class='id identifier rubyid_adjust_schedules'>adjust_schedules</span><span class='lparen'>(</span><span class='id identifier rubyid_standard'>standard</span><span class='comma'>,</span> <span class='id identifier rubyid_space_type'>space_type</span><span class='comma'>,</span> <span class='id identifier rubyid_building_occupant_hours_per_week'>building_occupant_hours_per_week</span><span class='comma'>,</span> <span class='id identifier rubyid_model'>model</span><span class='rparen'>)</span>
  <span class='comment'># this uses code from https://github.com/NREL/openstudio-extension-gem/blob/6f8f7a46de496c3ab95ed9c72d4d543bd4b67740/lib/openstudio/extension/core/os_lib_model_generation.rb#L3007
</span>  <span class='comment'>#
</span>  <span class='comment'># currently this works for all schedules in the model
</span>  <span class='comment'># in the future we would want to make this more flexible to adjusted based on space_types or building sections
</span>  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='op'>!</span><span class='id identifier rubyid_building_occupant_hours_per_week'>building_occupant_hours_per_week</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_hours_per_week'>hours_per_week</span> <span class='op'>=</span> <span class='id identifier rubyid_building_occupant_hours_per_week'>building_occupant_hours_per_week</span>

  <span class='id identifier rubyid_default_schedule_set'>default_schedule_set</span> <span class='op'>=</span> <span class='id identifier rubyid_help_get_default_schedule_set'>help_get_default_schedule_set</span><span class='lparen'>(</span><span class='id identifier rubyid_model'>model</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_existing_number_of_people_sched'>existing_number_of_people_sched</span> <span class='op'>=</span> <span class='id identifier rubyid_help_get_schedule_rule_set_from_schedule'>help_get_schedule_rule_set_from_schedule</span><span class='lparen'>(</span><span class='id identifier rubyid_default_schedule_set'>default_schedule_set</span><span class='period'>.</span><span class='id identifier rubyid_numberofPeopleSchedule'>numberofPeopleSchedule</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_existing_number_of_people_sched'>existing_number_of_people_sched</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_calc_hours_per_week'>calc_hours_per_week</span> <span class='op'>=</span> <span class='id identifier rubyid_help_calculate_hours'>help_calculate_hours</span><span class='lparen'>(</span><span class='id identifier rubyid_existing_number_of_people_sched'>existing_number_of_people_sched</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_ratio_hours_per_week'>ratio_hours_per_week</span> <span class='op'>=</span> <span class='id identifier rubyid_hours_per_week'>hours_per_week</span> <span class='op'>/</span> <span class='id identifier rubyid_calc_hours_per_week'>calc_hours_per_week</span>

  <span class='id identifier rubyid_wkdy_start_time'>wkdy_start_time</span> <span class='op'>=</span> <span class='id identifier rubyid_help_get_start_time_weekday'>help_get_start_time_weekday</span><span class='lparen'>(</span><span class='id identifier rubyid_existing_number_of_people_sched'>existing_number_of_people_sched</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_wkdy_end_time'>wkdy_end_time</span> <span class='op'>=</span> <span class='id identifier rubyid_help_get_end_time_weekday'>help_get_end_time_weekday</span><span class='lparen'>(</span><span class='id identifier rubyid_existing_number_of_people_sched'>existing_number_of_people_sched</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_wkdy_hours'>wkdy_hours</span> <span class='op'>=</span> <span class='id identifier rubyid_wkdy_end_time'>wkdy_end_time</span> <span class='op'>-</span> <span class='id identifier rubyid_wkdy_start_time'>wkdy_start_time</span>

  <span class='id identifier rubyid_sat_start_time'>sat_start_time</span> <span class='op'>=</span> <span class='id identifier rubyid_help_get_start_time_sat'>help_get_start_time_sat</span><span class='lparen'>(</span><span class='id identifier rubyid_existing_number_of_people_sched'>existing_number_of_people_sched</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sat_end_time'>sat_end_time</span> <span class='op'>=</span> <span class='id identifier rubyid_help_get_end_time_sat'>help_get_end_time_sat</span><span class='lparen'>(</span><span class='id identifier rubyid_existing_number_of_people_sched'>existing_number_of_people_sched</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sat_hours'>sat_hours</span> <span class='op'>=</span> <span class='id identifier rubyid_sat_end_time'>sat_end_time</span> <span class='op'>-</span> <span class='id identifier rubyid_sat_start_time'>sat_start_time</span>

  <span class='id identifier rubyid_sun_start_time'>sun_start_time</span> <span class='op'>=</span> <span class='id identifier rubyid_help_get_start_time_sun'>help_get_start_time_sun</span><span class='lparen'>(</span><span class='id identifier rubyid_existing_number_of_people_sched'>existing_number_of_people_sched</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sun_end_time'>sun_end_time</span> <span class='op'>=</span> <span class='id identifier rubyid_help_get_end_time_sun'>help_get_end_time_sun</span><span class='lparen'>(</span><span class='id identifier rubyid_existing_number_of_people_sched'>existing_number_of_people_sched</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sun_hours'>sun_hours</span> <span class='op'>=</span> <span class='id identifier rubyid_sun_end_time'>sun_end_time</span> <span class='op'>-</span> <span class='id identifier rubyid_sun_start_time'>sun_start_time</span>

  <span class='comment'># determine new end times via ratios
</span>  <span class='id identifier rubyid_wkdy_end_time'>wkdy_end_time</span> <span class='op'>=</span> <span class='id identifier rubyid_wkdy_start_time'>wkdy_start_time</span> <span class='op'>+</span> <span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_ratio_hours_per_week'>ratio_hours_per_week</span> <span class='op'>*</span> <span class='id identifier rubyid_wkdy_hours'>wkdy_hours</span><span class='period'>.</span><span class='id identifier rubyid_totalDays'>totalDays</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sat_end_time'>sat_end_time</span> <span class='op'>=</span> <span class='id identifier rubyid_sat_start_time'>sat_start_time</span> <span class='op'>+</span> <span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_ratio_hours_per_week'>ratio_hours_per_week</span> <span class='op'>*</span> <span class='id identifier rubyid_sat_hours'>sat_hours</span><span class='period'>.</span><span class='id identifier rubyid_totalDays'>totalDays</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sun_end_time'>sun_end_time</span> <span class='op'>=</span> <span class='id identifier rubyid_sun_start_time'>sun_start_time</span> <span class='op'>+</span> <span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_ratio_hours_per_week'>ratio_hours_per_week</span> <span class='op'>*</span> <span class='id identifier rubyid_sun_hours'>sun_hours</span><span class='period'>.</span><span class='id identifier rubyid_totalDays'>totalDays</span><span class='rparen'>)</span>

  <span class='comment'># Infer the current hours of operation schedule for the building
</span>  <span class='id identifier rubyid_op_sch'>op_sch</span> <span class='op'>=</span> <span class='id identifier rubyid_standard'>standard</span><span class='period'>.</span><span class='id identifier rubyid_model_infer_hours_of_operation_building'>model_infer_hours_of_operation_building</span><span class='lparen'>(</span><span class='id identifier rubyid_model'>model</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_default_schedule_set'>default_schedule_set</span><span class='period'>.</span><span class='id identifier rubyid_setHoursofOperationSchedule'>setHoursofOperationSchedule</span><span class='lparen'>(</span><span class='id identifier rubyid_op_sch'>op_sch</span><span class='rparen'>)</span>

  <span class='comment'># help_print_all_schedules(&quot;org_schedules-#{space_type.name}.csv&quot;, default_schedule_set)
</span>
  <span class='comment'># Convert existing schedules in the model to parametric schedules based on current hours of operation
</span>  <span class='id identifier rubyid_standard'>standard</span><span class='period'>.</span><span class='id identifier rubyid_model_setup_parametric_schedules'>model_setup_parametric_schedules</span><span class='lparen'>(</span><span class='id identifier rubyid_model'>model</span><span class='rparen'>)</span>

  <span class='comment'># Modify hours of operation, using weekdays values for all weekdays and weekend values for Saturday and Sunday
</span>  <span class='id identifier rubyid_standard'>standard</span><span class='period'>.</span><span class='id identifier rubyid_schedule_ruleset_set_hours_of_operation'>schedule_ruleset_set_hours_of_operation</span><span class='lparen'>(</span><span class='id identifier rubyid_op_sch'>op_sch</span><span class='comma'>,</span>
                                                   <span class='label'>wkdy_start_time:</span> <span class='id identifier rubyid_wkdy_start_time'>wkdy_start_time</span><span class='comma'>,</span>
                                                   <span class='label'>wkdy_end_time:</span> <span class='id identifier rubyid_wkdy_end_time'>wkdy_end_time</span><span class='comma'>,</span>
                                                   <span class='label'>sat_start_time:</span> <span class='id identifier rubyid_sat_start_time'>sat_start_time</span><span class='comma'>,</span>
                                                   <span class='label'>sat_end_time:</span> <span class='id identifier rubyid_sat_end_time'>sat_end_time</span><span class='comma'>,</span>
                                                   <span class='label'>sun_start_time:</span> <span class='id identifier rubyid_sun_start_time'>sun_start_time</span><span class='comma'>,</span>
                                                   <span class='label'>sun_end_time:</span> <span class='id identifier rubyid_sun_end_time'>sun_end_time</span><span class='rparen'>)</span>

  <span class='comment'># Apply new operating hours to parametric schedules to make schedules in model reflect modified hours of operation
</span>  <span class='id identifier rubyid_parametric_schedules'>parametric_schedules</span> <span class='op'>=</span> <span class='id identifier rubyid_standard'>standard</span><span class='period'>.</span><span class='id identifier rubyid_model_apply_parametric_schedules'>model_apply_parametric_schedules</span><span class='lparen'>(</span><span class='id identifier rubyid_model'>model</span><span class='comma'>,</span> <span class='label'>error_on_out_of_order:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Updated </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_parametric_schedules'>parametric_schedules</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_content'> schedules with new hours of operation.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>return</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_building_occupancy_hours-instance_method">
  
    #<strong>get_building_occupancy_hours</strong>(building_sections)  &#x21d2; <tt>Float</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>get building occupancy hours</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>building_sections</span>
      
      
        <span class='type'>(<tt>array</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Float</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


183
184
185
186
187
188
189
190
191
192
193
194
195
196</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/model_articulation/loads_system.rb', line 183</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_building_occupancy_hours'>get_building_occupancy_hours</span><span class='lparen'>(</span><span class='id identifier rubyid_building_sections'>building_sections</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_building_sections'>building_sections</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span> <span class='op'>==</span> <span class='int'>1</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_building_sections'>building_sections</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_typical_occupant_usage_value_hours'>typical_occupant_usage_value_hours</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_occupancy_hours'>occupancy_hours</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='float'>0.0</span>
  <span class='id identifier rubyid_building_sections'>building_sections</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_section'>section</span><span class='op'>|</span>
    <span class='id identifier rubyid_occupancy_hours'>occupancy_hours</span> <span class='op'>=</span> <span class='float'>0.0</span> <span class='kw'>if</span> <span class='id identifier rubyid_occupancy_hours'>occupancy_hours</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_occupancy_hours'>occupancy_hours</span> <span class='op'>+=</span> <span class='id identifier rubyid_section'>section</span><span class='period'>.</span><span class='id identifier rubyid_typical_occupant_usage_value_hours'>typical_occupant_usage_value_hours</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='kw'>if</span> <span class='id identifier rubyid_section'>section</span><span class='period'>.</span><span class='id identifier rubyid_typical_occupant_usage_value_hours'>typical_occupant_usage_value_hours</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_count'>count</span> <span class='op'>+=</span> <span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_section'>section</span><span class='period'>.</span><span class='id identifier rubyid_typical_occupant_usage_value_hours'>typical_occupant_usage_value_hours</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_occupancy_hours'>occupancy_hours</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_occupancy_hours'>occupancy_hours</span> <span class='op'>/</span> <span class='id identifier rubyid_count'>count</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue May 11 14:55:40 2021 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.26 (ruby-2.5.9).
</div>

    </div>
  </body>
</html>