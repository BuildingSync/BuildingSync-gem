<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: BuildingSync::Scenario
  
    &mdash; Documentation by YARD 0.9.26
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "BuildingSync::Scenario";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (S)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../BuildingSync.html" title="BuildingSync (module)">BuildingSync</a></span></span>
     &raquo; 
    <span class="title">Scenario</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: BuildingSync::Scenario
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">BuildingSync::Scenario</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="Helper.html" title="BuildingSync::Helper (module)">Helper</a></span>, <span class='object_link'><a href="XmlGetSet.html" title="BuildingSync::XmlGetSet (module)">XmlGetSet</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/buildingsync/scenario.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Scenario class</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_fields_from_map-instance_method" title="#add_fields_from_map (instance method)">#<strong>add_fields_from_map</strong>(fields, os_results, parent_xml)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_source_energy-instance_method" title="#add_source_energy (instance method)">#<strong>add_source_energy</strong>(all_resource_total_xml)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#benchmark%3F-instance_method" title="#benchmark? (instance method)">#<strong>benchmark?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cb_measured%3F-instance_method" title="#cb_measured? (instance method)">#<strong>cb_measured?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cb_modeled%3F-instance_method" title="#cb_modeled? (instance method)">#<strong>cb_modeled?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#check_scenario_type-instance_method" title="#check_scenario_type (instance method)">#<strong>check_scenario_type</strong>(path)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_previous_results-instance_method" title="#delete_previous_results (instance method)">#<strong>delete_previous_results</strong>(all = false)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>delete previous results from the Scenario.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_all_end_use_resource_uses-instance_method" title="#get_all_end_use_resource_uses (instance method)">#<strong>get_all_end_use_resource_uses</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_all_resource_totals-instance_method" title="#get_all_resource_totals (instance method)">#<strong>get_all_resource_totals</strong>  &#x21d2; Array&lt;REXML::Element&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_benchmark_tool-instance_method" title="#get_benchmark_tool (instance method)">#<strong>get_benchmark_tool</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_main_output_dir-instance_method" title="#get_main_output_dir (instance method)">#<strong>get_main_output_dir</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_measure_ids-instance_method" title="#get_measure_ids (instance method)">#<strong>get_measure_ids</strong>  &#x21d2; Array&lt;String&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_osw_dir-instance_method" title="#get_osw_dir (instance method)">#<strong>get_osw_dir</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>get osw dir.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_resource_uses-instance_method" title="#get_resource_uses (instance method)">#<strong>get_resource_uses</strong>  &#x21d2; Array&lt;BuildingSync::ResourceUse&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_scenario_type_child_element-instance_method" title="#get_scenario_type_child_element (instance method)">#<strong>get_scenario_type_child_element</strong>  &#x21d2; REXML::Element </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_source_energy_array-instance_method" title="#get_source_energy_array (instance method)">#<strong>get_source_energy_array</strong>(eplustbl_path)  &#x21d2; Array </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get source energy and source EUI from.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_time_series_data-instance_method" title="#get_time_series_data (instance method)">#<strong>get_time_series_data</strong>  &#x21d2; Array&lt;BuildingSync::TimeSeries&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_workflow-instance_method" title="#get_workflow (instance method)">#<strong>get_workflow</strong>  &#x21d2; Hash </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(base_xml, ns)  &#x21d2; Scenario </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of Scenario.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#os_add_all_resource_totals-instance_method" title="#os_add_all_resource_totals (instance method)">#<strong>os_add_all_resource_totals</strong>(results)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#os_add_resource_uses-instance_method" title="#os_add_resource_uses (instance method)">#<strong>os_add_resource_uses</strong>(results)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Use the bsync to openstudio resources map to add results from the
openstudio simulations as new ResourceUse elements and objects.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#os_gather_results-instance_method" title="#os_gather_results (instance method)">#<strong>os_gather_results</strong>(year_val)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#os_parse_annual_results-instance_method" title="#os_parse_annual_results (instance method)">#<strong>os_parse_annual_results</strong>(results = @results_json)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#os_parse_monthly_all_end_uses_results-instance_method" title="#os_parse_monthly_all_end_uses_results (instance method)">#<strong>os_parse_monthly_all_end_uses_results</strong>(year_val = Date.today.year, results = @results_json)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#osw_mkdir_p-instance_method" title="#osw_mkdir_p (instance method)">#<strong>osw_mkdir_p</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create the @osw_dir.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pom%3F-instance_method" title="#pom? (instance method)">#<strong>pom?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read_all_resource_totals-instance_method" title="#read_all_resource_totals (instance method)">#<strong>read_all_resource_totals</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read_resource_uses-instance_method" title="#read_resource_uses (instance method)">#<strong>read_resource_uses</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read_time_series_data-instance_method" title="#read_time_series_data (instance method)">#<strong>read_time_series_data</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read_xml-instance_method" title="#read_xml (instance method)">#<strong>read_xml</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#results_available_and_correct_units%3F-instance_method" title="#results_available_and_correct_units? (instance method)">#<strong>results_available_and_correct_units?</strong>(results = @results_json)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_main_output_dir-instance_method" title="#set_main_output_dir (instance method)">#<strong>set_main_output_dir</strong>(main_output_dir)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_osw_dir-instance_method" title="#set_osw_dir (instance method)">#<strong>set_osw_dir</strong>(main_output_dir = @main_output_dir)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_workflow-instance_method" title="#set_workflow (instance method)">#<strong>set_workflow</strong>(workflow)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#simulation_success%3F-instance_method" title="#simulation_success? (instance method)">#<strong>simulation_success?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Check that the simulation was completed successfully.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#target%3F-instance_method" title="#target? (instance method)">#<strong>target?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write_osw-instance_method" title="#write_osw (instance method)">#<strong>write_osw</strong>(main_output_dir = @main_output_dir)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Use the @workflow definition to write a new &#39; in.osw &#39; file.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="XmlGetSet.html" title="BuildingSync::XmlGetSet (module)">XmlGetSet</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="XmlGetSet.html#get_prefix-instance_method" title="BuildingSync::XmlGetSet#get_prefix (method)">#get_prefix</a></span>, <span class='object_link'><a href="XmlGetSet.html#xget_attribute_for_element-instance_method" title="BuildingSync::XmlGetSet#xget_attribute_for_element (method)">#xget_attribute_for_element</a></span>, <span class='object_link'><a href="XmlGetSet.html#xget_element-instance_method" title="BuildingSync::XmlGetSet#xget_element (method)">#xget_element</a></span>, <span class='object_link'><a href="XmlGetSet.html#xget_id-instance_method" title="BuildingSync::XmlGetSet#xget_id (method)">#xget_id</a></span>, <span class='object_link'><a href="XmlGetSet.html#xget_idrefs-instance_method" title="BuildingSync::XmlGetSet#xget_idrefs (method)">#xget_idrefs</a></span>, <span class='object_link'><a href="XmlGetSet.html#xget_linked_premises-instance_method" title="BuildingSync::XmlGetSet#xget_linked_premises (method)">#xget_linked_premises</a></span>, <span class='object_link'><a href="XmlGetSet.html#xget_name-instance_method" title="BuildingSync::XmlGetSet#xget_name (method)">#xget_name</a></span>, <span class='object_link'><a href="XmlGetSet.html#xget_or_create-instance_method" title="BuildingSync::XmlGetSet#xget_or_create (method)">#xget_or_create</a></span>, <span class='object_link'><a href="XmlGetSet.html#xget_plurals_text_value-instance_method" title="BuildingSync::XmlGetSet#xget_plurals_text_value (method)">#xget_plurals_text_value</a></span>, <span class='object_link'><a href="XmlGetSet.html#xget_text-instance_method" title="BuildingSync::XmlGetSet#xget_text (method)">#xget_text</a></span>, <span class='object_link'><a href="XmlGetSet.html#xget_text_as_bool-instance_method" title="BuildingSync::XmlGetSet#xget_text_as_bool (method)">#xget_text_as_bool</a></span>, <span class='object_link'><a href="XmlGetSet.html#xget_text_as_date-instance_method" title="BuildingSync::XmlGetSet#xget_text_as_date (method)">#xget_text_as_date</a></span>, <span class='object_link'><a href="XmlGetSet.html#xget_text_as_dt-instance_method" title="BuildingSync::XmlGetSet#xget_text_as_dt (method)">#xget_text_as_dt</a></span>, <span class='object_link'><a href="XmlGetSet.html#xget_text_as_float-instance_method" title="BuildingSync::XmlGetSet#xget_text_as_float (method)">#xget_text_as_float</a></span>, <span class='object_link'><a href="XmlGetSet.html#xget_text_as_integer-instance_method" title="BuildingSync::XmlGetSet#xget_text_as_integer (method)">#xget_text_as_integer</a></span>, <span class='object_link'><a href="XmlGetSet.html#xset_or_create-instance_method" title="BuildingSync::XmlGetSet#xset_or_create (method)">#xset_or_create</a></span>, <span class='object_link'><a href="XmlGetSet.html#xset_text-instance_method" title="BuildingSync::XmlGetSet#xset_text (method)">#xset_text</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Helper.html" title="BuildingSync::Helper (module)">Helper</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Helper.html#help_calculate_hours-instance_method" title="BuildingSync::Helper#help_calculate_hours (method)">#help_calculate_hours</a></span>, <span class='object_link'><a href="Helper.html#help_convert-instance_method" title="BuildingSync::Helper#help_convert (method)">#help_convert</a></span>, <span class='object_link'><a href="Helper.html#help_count_number_of_days-instance_method" title="BuildingSync::Helper#help_count_number_of_days (method)">#help_count_number_of_days</a></span>, <span class='object_link'><a href="Helper.html#help_element_class_type_check-instance_method" title="BuildingSync::Helper#help_element_class_type_check (method)">#help_element_class_type_check</a></span>, <span class='object_link'><a href="Helper.html#help_get_attribute_value-instance_method" title="BuildingSync::Helper#help_get_attribute_value (method)">#help_get_attribute_value</a></span>, <span class='object_link'><a href="Helper.html#help_get_default_schedule_set-instance_method" title="BuildingSync::Helper#help_get_default_schedule_set (method)">#help_get_default_schedule_set</a></span>, <span class='object_link'><a href="Helper.html#help_get_duration-instance_method" title="BuildingSync::Helper#help_get_duration (method)">#help_get_duration</a></span>, <span class='object_link'><a href="Helper.html#help_get_end_time-instance_method" title="BuildingSync::Helper#help_get_end_time (method)">#help_get_end_time</a></span>, <span class='object_link'><a href="Helper.html#help_get_end_time_sat-instance_method" title="BuildingSync::Helper#help_get_end_time_sat (method)">#help_get_end_time_sat</a></span>, <span class='object_link'><a href="Helper.html#help_get_end_time_sun-instance_method" title="BuildingSync::Helper#help_get_end_time_sun (method)">#help_get_end_time_sun</a></span>, <span class='object_link'><a href="Helper.html#help_get_end_time_weekday-instance_method" title="BuildingSync::Helper#help_get_end_time_weekday (method)">#help_get_end_time_weekday</a></span>, <span class='object_link'><a href="Helper.html#help_get_or_create-instance_method" title="BuildingSync::Helper#help_get_or_create (method)">#help_get_or_create</a></span>, <span class='object_link'><a href="Helper.html#help_get_schedule_rule_set_from_schedule-instance_method" title="BuildingSync::Helper#help_get_schedule_rule_set_from_schedule (method)">#help_get_schedule_rule_set_from_schedule</a></span>, <span class='object_link'><a href="Helper.html#help_get_start_time-instance_method" title="BuildingSync::Helper#help_get_start_time (method)">#help_get_start_time</a></span>, <span class='object_link'><a href="Helper.html#help_get_start_time_sat-instance_method" title="BuildingSync::Helper#help_get_start_time_sat (method)">#help_get_start_time_sat</a></span>, <span class='object_link'><a href="Helper.html#help_get_start_time_sun-instance_method" title="BuildingSync::Helper#help_get_start_time_sun (method)">#help_get_start_time_sun</a></span>, <span class='object_link'><a href="Helper.html#help_get_start_time_weekday-instance_method" title="BuildingSync::Helper#help_get_start_time_weekday (method)">#help_get_start_time_weekday</a></span>, <span class='object_link'><a href="Helper.html#help_get_text_value-instance_method" title="BuildingSync::Helper#help_get_text_value (method)">#help_get_text_value</a></span>, <span class='object_link'><a href="Helper.html#help_get_text_value_as_bool-instance_method" title="BuildingSync::Helper#help_get_text_value_as_bool (method)">#help_get_text_value_as_bool</a></span>, <span class='object_link'><a href="Helper.html#help_get_text_value_as_date-instance_method" title="BuildingSync::Helper#help_get_text_value_as_date (method)">#help_get_text_value_as_date</a></span>, <span class='object_link'><a href="Helper.html#help_get_text_value_as_datetime-instance_method" title="BuildingSync::Helper#help_get_text_value_as_datetime (method)">#help_get_text_value_as_datetime</a></span>, <span class='object_link'><a href="Helper.html#help_get_text_value_as_float-instance_method" title="BuildingSync::Helper#help_get_text_value_as_float (method)">#help_get_text_value_as_float</a></span>, <span class='object_link'><a href="Helper.html#help_get_text_value_as_integer-instance_method" title="BuildingSync::Helper#help_get_text_value_as_integer (method)">#help_get_text_value_as_integer</a></span>, <span class='object_link'><a href="Helper.html#help_get_zone_name_list-instance_method" title="BuildingSync::Helper#help_get_zone_name_list (method)">#help_get_zone_name_list</a></span>, <span class='object_link'><a href="Helper.html#help_load_doc-instance_method" title="BuildingSync::Helper#help_load_doc (method)">#help_load_doc</a></span>, <span class='object_link'><a href="Helper.html#help_print_all_schedules-instance_method" title="BuildingSync::Helper#help_print_all_schedules (method)">#help_print_all_schedules</a></span>, <span class='object_link'><a href="Helper.html#help_print_schedule-instance_method" title="BuildingSync::Helper#help_print_schedule (method)">#help_print_schedule</a></span>, <span class='object_link'><a href="Helper.html#help_write_profile-instance_method" title="BuildingSync::Helper#help_write_profile (method)">#help_write_profile</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(base_xml, ns)  &#x21d2; <tt><span class='object_link'><a href="" title="BuildingSync::Scenario (class)">Scenario</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a new instance of Scenario.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 54</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_base_xml'>base_xml</span><span class='comma'>,</span> <span class='id identifier rubyid_ns'>ns</span><span class='rparen'>)</span>
  <span class='ivar'>@base_xml</span> <span class='op'>=</span> <span class='id identifier rubyid_base_xml'>base_xml</span>
  <span class='ivar'>@ns</span> <span class='op'>=</span> <span class='id identifier rubyid_ns'>ns</span>

  <span class='id identifier rubyid_help_element_class_type_check'>help_element_class_type_check</span><span class='lparen'>(</span><span class='id identifier rubyid_base_xml'>base_xml</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Scenario</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

  <span class='comment'># Helpful
</span>  <span class='ivar'>@site_eui_xpath</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:AllResourceTotals/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:AllResourceTotal/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:SiteEnergyUseIntensity</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@g</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../BuildingSync.html" title="BuildingSync (module)">BuildingSync</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Generator.html" title="BuildingSync::Generator (class)">Generator</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Generator.html#initialize-instance_method" title="BuildingSync::Generator#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='ivar'>@ns</span><span class='rparen'>)</span>

  <span class='comment'># linked fields
</span>  <span class='ivar'>@resource_uses</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='comment'># Array[&lt;BuildingSync::ResourceUse&gt;]
</span>  <span class='ivar'>@time_series_data</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='comment'># Array[&lt;BuildingSync::TimeSeries]
</span>  <span class='ivar'>@all_resource_totals</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='comment'># Array[&lt;REXML::Element&gt;] of AllResourceTotal
</span>
  <span class='comment'># Simulation relevant fields
</span>  <span class='ivar'>@main_output_dir</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@osw_dir</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@workflow</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span> <span class='comment'># Hash to hold the workflow, see set_workflow
</span>  <span class='ivar'>@results_file_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>results.json</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># holds annual and monthly results
</span>  <span class='ivar'>@eplustbl_file_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>eplustbl.htm</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># holds source energy results
</span>  <span class='ivar'>@out_osw_file_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>out.osw</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># holds the completion status of the simulation
</span>  <span class='ivar'>@out_osw_json</span> <span class='op'>=</span> <span class='kw'>nil</span> <span class='comment'># Hash to hold the read in of out.osw
</span>  <span class='ivar'>@results_json</span> <span class='op'>=</span> <span class='kw'>nil</span> <span class='comment'># Hash to hold the read in of results.json
</span>
  <span class='comment'># Define mappings for native units by Resource Use
</span>  <span class='ivar'>@native_units_map</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Electricity</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>kWh</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Natural gas</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>kBtu</span><span class='tstring_end'>&#39;</span></span>
  <span class='rbrace'>}</span>

  <span class='comment'># Define a mapping between BuildingSync concepts to openstudio concepts
</span>  <span class='comment'># available in the results.json file
</span>  <span class='ivar'>@bsync_openstudio_resources_map</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>IP</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ResourceUse</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span>
        <span class='lbrace'>{</span>
          <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>EnergyResource</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Electricity</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
          <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>EndUse</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>All end uses</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
          <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fields</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span>
            <span class='lbrace'>{</span>
              <span class='comment'># AnnualFuelUseConsistentUnits is in MMBtu/yr
</span>              <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bsync_element_name</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>AnnualFuelUseConsistentUnits</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
              <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bsync_element_units</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>MMBtu</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
              <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>os_results_key</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fuel_electricity</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
              <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>os_results_unit</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>kBtu</span><span class='tstring_end'>&#39;</span></span>
            <span class='rbrace'>}</span><span class='comma'>,</span>
            <span class='lbrace'>{</span>
              <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bsync_element_name</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>AnnualPeakConsistentUnits</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
              <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bsync_element_units</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>kW</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
              <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>os_results_key</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>annual_peak_electric_demand</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
              <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>os_results_unit</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>kW</span><span class='tstring_end'>&#39;</span></span>
            <span class='rbrace'>}</span>
          <span class='rbracket'>]</span><span class='comma'>,</span>
          <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>monthly</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
            <span class='comment'># [bracket text] is replaced when processed
</span>            <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>text</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>electricity_ip_[month]</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
            <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>os_results_unit</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>kWh</span><span class='tstring_end'>&#39;</span></span>
          <span class='rbrace'>}</span>
        <span class='rbrace'>}</span><span class='comma'>,</span>
        <span class='lbrace'>{</span>
          <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>EnergyResource</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Natural gas</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
          <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>EndUse</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>All end uses</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
          <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fields</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span>
            <span class='lbrace'>{</span>
              <span class='comment'># AnnualFuelUseConsistentUnits is in MMBtu/yr
</span>              <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bsync_element_name</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>AnnualFuelUseConsistentUnits</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
              <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bsync_element_units</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>MMBtu</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
              <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>os_results_key</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fuel_natural_gas</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
              <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>os_results_unit</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>kBtu</span><span class='tstring_end'>&#39;</span></span>
            <span class='rbrace'>}</span>
          <span class='rbracket'>]</span><span class='comma'>,</span>
          <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>monthly</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
            <span class='comment'># [bracket text] is replaced when processed
</span>            <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>text</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>natural_gas_ip_[month]</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
            <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>os_results_unit</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>MMBtu</span><span class='tstring_end'>&#39;</span></span>
          <span class='rbrace'>}</span>
        <span class='rbrace'>}</span>
      <span class='rbracket'>]</span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>AllResourceTotal</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span>
        <span class='lbrace'>{</span>
          <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>EndUse</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>All end uses</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
          <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fields</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span>
            <span class='lbrace'>{</span>
              <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bsync_element_name</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SiteEnergyUse</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
              <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bsync_element_units</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>kBtu</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
              <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>os_results_key</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>total_site_energy</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
              <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>os_results_unit</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>kBtu</span><span class='tstring_end'>&#39;</span></span>
            <span class='rbrace'>}</span><span class='comma'>,</span>
            <span class='lbrace'>{</span>
              <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bsync_element_name</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SiteEnergyUseIntensity</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
              <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bsync_element_units</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>kBtu/ft^2</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
              <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>os_results_key</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>total_site_eui</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
              <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>os_results_unit</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>kBtu/ft^2</span><span class='tstring_end'>&#39;</span></span>
            <span class='rbrace'>}</span>
          <span class='rbracket'>]</span>
        <span class='rbrace'>}</span>
      <span class='rbracket'>]</span>
    <span class='rbrace'>}</span>
  <span class='rbrace'>}</span>

  <span class='id identifier rubyid_read_xml'>read_xml</span>

  <span class='comment'># Removes data from POM and CB Modeled on import
</span>  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_get_scenario_type_child_element'>get_scenario_type_child_element</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_pom?'>pom?</span> <span class='op'>||</span> <span class='id identifier rubyid_cb_modeled?'>cb_modeled?</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_delete_previous_results'>delete_previous_results</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="add_fields_from_map-instance_method">
  
    #<strong>add_fields_from_map</strong>(fields, os_results, parent_xml)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 530</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_fields_from_map'>add_fields_from_map</span><span class='lparen'>(</span><span class='id identifier rubyid_fields'>fields</span><span class='comma'>,</span> <span class='id identifier rubyid_os_results'>os_results</span><span class='comma'>,</span> <span class='id identifier rubyid_parent_xml'>parent_xml</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_fields'>fields</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_field'>field</span><span class='op'>|</span>
    <span class='id identifier rubyid_os_results_val'>os_results_val</span> <span class='op'>=</span> <span class='id identifier rubyid_os_results'>os_results</span><span class='lbracket'>[</span><span class='id identifier rubyid_field'>field</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>os_results_key</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_os_results_val'>os_results_val</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Error</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.Scenario.parse_annual_results</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Scenario ID: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_xget_id'>xget_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>.  Unable to find result for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_field'>field</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>os_results_key</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_field'>field</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>os_results_unit</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_field'>field</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bsync_element_units</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='comment'># Parent element
</span>        <span class='id identifier rubyid_new_element'>new_element</span> <span class='op'>=</span> <span class='const'>REXML</span><span class='op'>::</span><span class='const'>Element</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_field'>field</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bsync_element_name</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_parent_xml'>parent_xml</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_new_element'>new_element</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='op'>=</span> <span class='id identifier rubyid_os_results_val'>os_results_val</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_converted'>converted</span> <span class='op'>=</span> <span class='id identifier rubyid_help_convert'>help_convert</span><span class='lparen'>(</span><span class='id identifier rubyid_os_results_val'>os_results_val</span><span class='comma'>,</span> <span class='id identifier rubyid_field'>field</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>os_results_unit</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_field'>field</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bsync_element_units</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_converted'>converted</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
          <span class='id identifier rubyid_new_element'>new_element</span> <span class='op'>=</span> <span class='const'>REXML</span><span class='op'>::</span><span class='const'>Element</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_field'>field</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bsync_element_name</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_parent_xml'>parent_xml</span><span class='rparen'>)</span>
          <span class='id identifier rubyid_new_element'>new_element</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='op'>=</span> <span class='id identifier rubyid_converted'>converted</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_source_energy-instance_method">
  
    #<strong>add_source_energy</strong>(all_resource_total_xml)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


494
495
496
497
498
499
500
501
502
503
504
505</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 494</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_source_energy'>add_source_energy</span><span class='lparen'>(</span><span class='id identifier rubyid_all_resource_total_xml'>all_resource_total_xml</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_eplustbl_file'>eplustbl_file</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_get_osw_dir'>get_osw_dir</span><span class='comma'>,</span> <span class='ivar'>@eplustbl_file_name</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='id identifier rubyid_eplustbl_file'>eplustbl_file</span><span class='rparen'>)</span>
    <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Warn</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.Scenario.add_source_energy</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Scenario ID: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_xget_id'>xget_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>.  </span><span class='embexpr_beg'>#{</span><span class='ivar'>@eplustbl_file_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> does not exist, cannot add source energy results</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_source_energy'>source_energy</span><span class='comma'>,</span> <span class='id identifier rubyid_source_eui'>source_eui</span> <span class='op'>=</span> <span class='id identifier rubyid_get_source_energy_array'>get_source_energy_array</span><span class='lparen'>(</span><span class='id identifier rubyid_eplustbl_file'>eplustbl_file</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_source_energy_xml'>source_energy_xml</span> <span class='op'>=</span> <span class='const'>REXML</span><span class='op'>::</span><span class='const'>Element</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:SourceEnergyUse</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_all_resource_total_xml'>all_resource_total_xml</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_source_energy_xml'>source_energy_xml</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='op'>=</span> <span class='id identifier rubyid_source_energy'>source_energy</span>
    <span class='id identifier rubyid_source_eui_xml'>source_eui_xml</span> <span class='op'>=</span> <span class='const'>REXML</span><span class='op'>::</span><span class='const'>Element</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:SourceEnergyUseIntensity</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_all_resource_total_xml'>all_resource_total_xml</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_source_eui_xml'>source_eui_xml</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span> <span class='op'>=</span> <span class='id identifier rubyid_source_eui'>source_eui</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="benchmark?-instance_method">
  
    #<strong>benchmark?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


615
616
617
618
619
620</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 615</span>

<span class='kw'>def</span> <span class='id identifier rubyid_benchmark?'>benchmark?</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_xget_element'>xget_element</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ScenarioType</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>return</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_check_scenario_type'>check_scenario_type</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>./</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:Benchmark</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="cb_measured?-instance_method">
  
    #<strong>cb_measured?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


587
588
589
590
591
592</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 587</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cb_measured?'>cb_measured?</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_xget_element'>xget_element</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ScenarioType</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>return</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_check_scenario_type'>check_scenario_type</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>./</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:CurrentBuilding/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:CalculationMethod/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:Measured</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="cb_modeled?-instance_method">
  
    #<strong>cb_modeled?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


594
595
596
597
598
599</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 594</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cb_modeled?'>cb_modeled?</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_xget_element'>xget_element</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ScenarioType</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>return</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_check_scenario_type'>check_scenario_type</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>./</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:CurrentBuilding/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:CalculationMethod/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:Modeled</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="check_scenario_type-instance_method">
  
    #<strong>check_scenario_type</strong>(path)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


578
579
580
581
582
583
584
585</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 578</span>

<span class='kw'>def</span> <span class='id identifier rubyid_check_scenario_type'>check_scenario_type</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_to_check'>to_check</span> <span class='op'>=</span> <span class='id identifier rubyid_xget_element'>xget_element</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ScenarioType</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_get_elements'>get_elements</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_to_check'>to_check</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_to_check'>to_check</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='kw'>return</span> <span class='kw'>true</span>
  <span class='kw'>else</span>
    <span class='kw'>return</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete_previous_results-instance_method">
  
    #<strong>delete_previous_results</strong>(all = false)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>delete previous results from the Scenario.  This only affects POM or
cb_modeled scenarios, unless all = true is passed</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 274</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delete_previous_results'>delete_previous_results</span><span class='lparen'>(</span><span class='id identifier rubyid_all'>all</span> <span class='op'>=</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_pom?'>pom?</span>
    <span class='id identifier rubyid_get_scenario_type_child_element'>get_scenario_type_child_element</span><span class='period'>.</span><span class='id identifier rubyid_elements'>elements</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:AnnualSavingsSiteEnergy</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_get_scenario_type_child_element'>get_scenario_type_child_element</span><span class='period'>.</span><span class='id identifier rubyid_elements'>elements</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:AnnualSavingsCost</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_get_scenario_type_child_element'>get_scenario_type_child_element</span><span class='period'>.</span><span class='id identifier rubyid_elements'>elements</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:CalculationMethod</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_get_scenario_type_child_element'>get_scenario_type_child_element</span><span class='period'>.</span><span class='id identifier rubyid_elements'>elements</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>AnnualSavingsByFuels</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># Delete elements from the xml and reset the attributes to empty
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_pom?'>pom?</span> <span class='op'>||</span> <span class='id identifier rubyid_cb_modeled?'>cb_modeled?</span> <span class='op'>||</span> <span class='id identifier rubyid_all'>all</span>
    <span class='id identifier rubyid_get_scenario_type_child_element'>get_scenario_type_child_element</span><span class='period'>.</span><span class='id identifier rubyid_elements'>elements</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>AllResourceTotals</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_get_scenario_type_child_element'>get_scenario_type_child_element</span><span class='period'>.</span><span class='id identifier rubyid_elements'>elements</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>ResourceUses</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='ivar'>@resource_uses</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='ivar'>@all_resource_totals</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_all_end_use_resource_uses-instance_method">
  
    #<strong>get_all_end_use_resource_uses</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


188
189
190</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 188</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_all_end_use_resource_uses'>get_all_end_use_resource_uses</span>
  <span class='kw'>return</span> <span class='ivar'>@resource_uses</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_ru'>ru</span><span class='op'>|</span> <span class='id identifier rubyid_ru'>ru</span><span class='period'>.</span><span class='id identifier rubyid_xget_text'>xget_text</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>EndUse</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>All end uses</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_all_resource_totals-instance_method">
  
    #<strong>get_all_resource_totals</strong>  &#x21d2; <tt>Array&lt;REXML::Element&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;REXML::Element&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


193
194
195</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 193</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_all_resource_totals'>get_all_resource_totals</span>
  <span class='kw'>return</span> <span class='ivar'>@all_resource_totals</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_benchmark_tool-instance_method">
  
    #<strong>get_benchmark_tool</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


218
219
220
221</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 218</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_benchmark_tool'>get_benchmark_tool</span>
  <span class='id identifier rubyid_child'>child</span> <span class='op'>=</span> <span class='id identifier rubyid_get_scenario_type_child_element'>get_scenario_type_child_element</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_help_get_text_value'>help_get_text_value</span><span class='lparen'>(</span><span class='id identifier rubyid_child'>child</span><span class='period'>.</span><span class='id identifier rubyid_elements'>elements</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:BenchmarkTool</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_main_output_dir-instance_method">
  
    #<strong>get_main_output_dir</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


208
209
210</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 208</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_main_output_dir'>get_main_output_dir</span>
  <span class='kw'>return</span> <span class='ivar'>@main_output_dir</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_measure_ids-instance_method">
  
    #<strong>get_measure_ids</strong>  &#x21d2; <tt>Array&lt;String&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


179
180
181</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 179</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_measure_ids'>get_measure_ids</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_xget_idrefs'>xget_idrefs</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>MeasureID</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_osw_dir-instance_method">
  
    #<strong>get_osw_dir</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>get osw dir</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>directory to the new osw_dir</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


214
215
216</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 214</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_osw_dir'>get_osw_dir</span>
  <span class='kw'>return</span> <span class='ivar'>@osw_dir</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_resource_uses-instance_method">
  
    #<strong>get_resource_uses</strong>  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="ResourceUse.html" title="BuildingSync::ResourceUse (class)">BuildingSync::ResourceUse</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="ResourceUse.html" title="BuildingSync::ResourceUse (class)">BuildingSync::ResourceUse</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


184
185
186</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 184</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_resource_uses'>get_resource_uses</span>
  <span class='kw'>return</span> <span class='ivar'>@resource_uses</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_scenario_type_child_element-instance_method">
  
    #<strong>get_scenario_type_child_element</strong>  &#x21d2; <tt>REXML::Element</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>REXML::Element</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


171
172
173
174
175
176</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 171</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_scenario_type_child_element'>get_scenario_type_child_element</span>
  <span class='id identifier rubyid_scenario_type'>scenario_type</span> <span class='op'>=</span> <span class='id identifier rubyid_xget_element'>xget_element</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ScenarioType</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_scenario_type'>scenario_type</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_scenario_type'>scenario_type</span><span class='period'>.</span><span class='id identifier rubyid_get_elements'>get_elements</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>*</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_source_energy_array-instance_method">
  
    #<strong>get_source_energy_array</strong>(eplustbl_path)  &#x21d2; <tt>Array</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get source energy and source EUI from</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>eplustbl_path</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><dl class="rdoc-list label-list"><dt>total_source_energy_kbtu, total_source_eui_kbtu_ft2
<dd></dd></dl>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 510</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_source_energy_array'>get_source_energy_array</span><span class='lparen'>(</span><span class='id identifier rubyid_eplustbl_path'>eplustbl_path</span><span class='rparen'>)</span>
  <span class='comment'># DLM: total hack because these are not reported in the out.osw
</span>  <span class='comment'># output is array of [source_energy, source_eui] in kBtu and kBtu/ft2
</span>  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_eplustbl_path'>eplustbl_path</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
    <span class='kw'>while</span> <span class='id identifier rubyid_line'>line</span> <span class='op'>=</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_gets'>gets</span>
      <span class='kw'>if</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\&lt;td align=\&quot;right\&quot;\&gt;Total Source Energy\&lt;\/td\&gt;</span><span class='regexp_end'>/</span></span><span class='period'>.</span><span class='id identifier rubyid_match?'>match?</span><span class='lparen'>(</span><span class='id identifier rubyid_line'>line</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_result'>result</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\&lt;td align=\&quot;right\&quot;\&gt;(.*?)&lt;\/td\&gt;</span><span class='regexp_end'>/</span></span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_gets'>gets</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span>
        <span class='id identifier rubyid_result'>result</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\&lt;td align=\&quot;right\&quot;\&gt;(.*?)&lt;\/td\&gt;</span><span class='regexp_end'>/</span></span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_gets'>gets</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span>
        <span class='kw'>break</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='float'>947.8171203133</span> <span class='comment'># GJ to kBtu
</span>  <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='float'>0.947817120313</span> <span class='op'>*</span> <span class='float'>0.092903</span> <span class='comment'># MJ/m2 to kBtu/ft2
</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_time_series_data-instance_method">
  
    #<strong>get_time_series_data</strong>  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="TimeSeries.html" title="BuildingSync::TimeSeries (class)">BuildingSync::TimeSeries</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="TimeSeries.html" title="BuildingSync::TimeSeries (class)">BuildingSync::TimeSeries</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


198
199
200</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 198</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_time_series_data'>get_time_series_data</span>
  <span class='kw'>return</span> <span class='ivar'>@time_series_data</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_workflow-instance_method">
  
    #<strong>get_workflow</strong>  &#x21d2; <tt>Hash</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


203
204
205</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 203</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_workflow'>get_workflow</span>
  <span class='kw'>return</span> <span class='ivar'>@workflow</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="os_add_all_resource_totals-instance_method">
  
    #<strong>os_add_all_resource_totals</strong>(results)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 467</span>

<span class='kw'>def</span> <span class='id identifier rubyid_os_add_all_resource_totals'>os_add_all_resource_totals</span><span class='lparen'>(</span><span class='id identifier rubyid_results'>results</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_ip_map'>ip_map</span> <span class='op'>=</span> <span class='ivar'>@bsync_openstudio_resources_map</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>IP</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_os_results'>os_results</span> <span class='op'>=</span> <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>OpenStudioResults</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>

  <span class='comment'># Loop through ResourceUses in the resource_use_map
</span>  <span class='id identifier rubyid_ip_map'>ip_map</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>AllResourceTotal</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_map'>map</span><span class='op'>|</span>
    <span class='id identifier rubyid_end_use'>end_use</span> <span class='op'>=</span> <span class='id identifier rubyid_map'>map</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>EndUse</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>

    <span class='comment'># Check if an AllResourceTotal of the desired type already exists
</span>    <span class='id identifier rubyid_element'>element</span> <span class='op'>=</span> <span class='ivar'>@base_xml</span><span class='period'>.</span><span class='id identifier rubyid_get_elements'>get_elements</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>./</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:AllResourceTotals/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:AllResourceTotal[</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:EndUse/text() = &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_end_use'>end_use</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;]</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

    <span class='comment'># Add a new ResourceUse xml to the Scenario
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_element'>element</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_element'>element</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
      <span class='id identifier rubyid_art_id'>art_id</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_xget_id'>xget_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>-AllResourceTotal-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_end_use'>end_use</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:capitalize</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_all_resource_total_xml'>all_resource_total_xml</span> <span class='op'>=</span> <span class='ivar'>@g</span><span class='period'>.</span><span class='id identifier rubyid_add_all_resource_total_to_scenario'>add_all_resource_total_to_scenario</span><span class='lparen'>(</span><span class='ivar'>@base_xml</span><span class='comma'>,</span> <span class='id identifier rubyid_end_use'>end_use</span><span class='comma'>,</span> <span class='id identifier rubyid_art_id'>art_id</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Warn</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.Scenario.parse_annual_results</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Scenario ID: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_xget_id'>xget_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>.  Resource Use of type: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ru_type'>ru_type</span><span class='embexpr_end'>}</span><span class='tstring_content'> and end use: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_end_use'>end_use</span><span class='embexpr_end'>}</span><span class='tstring_content'> already exists</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_all_resource_total_xml'>all_resource_total_xml</span> <span class='op'>=</span> <span class='id identifier rubyid_element'>element</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_add_fields_from_map'>add_fields_from_map</span><span class='lparen'>(</span><span class='id identifier rubyid_map'>map</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fields</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_os_results'>os_results</span><span class='comma'>,</span> <span class='id identifier rubyid_all_resource_total_xml'>all_resource_total_xml</span><span class='rparen'>)</span>
    <span class='comment'># add_source_energy(all_resource_total_xml)
</span>
    <span class='ivar'>@all_resource_totals</span> <span class='op'>&lt;&lt;</span> <span class='const'><span class='object_link'><a href="../BuildingSync.html" title="BuildingSync (module)">BuildingSync</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="AllResourceTotal.html" title="BuildingSync::AllResourceTotal (class)">AllResourceTotal</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="AllResourceTotal.html#initialize-instance_method" title="BuildingSync::AllResourceTotal#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_all_resource_total_xml'>all_resource_total_xml</span><span class='comma'>,</span> <span class='ivar'>@ns</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="os_add_resource_uses-instance_method">
  
    #<strong>os_add_resource_uses</strong>(results)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Use the bsync to openstudio resources map to add results from the
openstudio simulations as new ResourceUse elements and objects</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>results</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a hash of the results as directly read in from a results.json file</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 436</span>

<span class='kw'>def</span> <span class='id identifier rubyid_os_add_resource_uses'>os_add_resource_uses</span><span class='lparen'>(</span><span class='id identifier rubyid_results'>results</span><span class='rparen'>)</span>
  <span class='ivar'>@results_json</span> <span class='op'>=</span> <span class='id identifier rubyid_results'>results</span>
  <span class='id identifier rubyid_ip_map'>ip_map</span> <span class='op'>=</span> <span class='ivar'>@bsync_openstudio_resources_map</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>IP</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_os_results'>os_results</span> <span class='op'>=</span> <span class='ivar'>@results_json</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>OpenStudioResults</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>

  <span class='comment'># Loop through ResourceUses in the resource_use_map
</span>  <span class='id identifier rubyid_ip_map'>ip_map</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ResourceUse</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_resource_use_map'>resource_use_map</span><span class='op'>|</span>
    <span class='id identifier rubyid_ru_type'>ru_type</span> <span class='op'>=</span> <span class='id identifier rubyid_resource_use_map'>resource_use_map</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>EnergyResource</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_end_use'>end_use</span> <span class='op'>=</span> <span class='id identifier rubyid_resource_use_map'>resource_use_map</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>EndUse</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_native_units'>native_units</span> <span class='op'>=</span> <span class='ivar'>@native_units_map</span><span class='lbracket'>[</span><span class='id identifier rubyid_ru_type'>ru_type</span><span class='rbracket'>]</span>

    <span class='comment'># Check if a ResourceUse of the desired type already exists
</span>    <span class='id identifier rubyid_resource_use_element'>resource_use_element</span> <span class='op'>=</span> <span class='ivar'>@base_xml</span><span class='period'>.</span><span class='id identifier rubyid_get_elements'>get_elements</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>./</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:ResourceUses/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:ResourceUse[</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:EnergyResource/text() = &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ru_type'>ru_type</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; and </span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:EndUse/text() = &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_end_use'>end_use</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;]</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

    <span class='comment'># Add a new ResourceUse xml to the Scenario.  This also adds ResourceUses if not defined
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_resource_use_element'>resource_use_element</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_resource_use_element'>resource_use_element</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
      <span class='id identifier rubyid_ru_id'>ru_id</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_xget_id'>xget_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>-ResourceUse-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ru_type'>ru_type</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:capitalize</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_end_use'>end_use</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:capitalize</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_resource_use_xml'>resource_use_xml</span> <span class='op'>=</span> <span class='ivar'>@g</span><span class='period'>.</span><span class='id identifier rubyid_add_energy_resource_use_to_scenario'>add_energy_resource_use_to_scenario</span><span class='lparen'>(</span><span class='ivar'>@base_xml</span><span class='comma'>,</span> <span class='id identifier rubyid_ru_type'>ru_type</span><span class='comma'>,</span> <span class='id identifier rubyid_end_use'>end_use</span><span class='comma'>,</span> <span class='id identifier rubyid_ru_id'>ru_id</span><span class='comma'>,</span> <span class='id identifier rubyid_native_units'>native_units</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Warn</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.Scenario.parse_annual_results</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Scenario ID: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_xget_id'>xget_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>.  Resource Use of type: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ru_type'>ru_type</span><span class='embexpr_end'>}</span><span class='tstring_content'> and end use: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_end_use'>end_use</span><span class='embexpr_end'>}</span><span class='tstring_content'> already exists</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_resource_use_xml'>resource_use_xml</span> <span class='op'>=</span> <span class='id identifier rubyid_resource_use_element'>resource_use_element</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
    <span class='kw'>end</span>

    <span class='comment'># Map in the fields for each ResourceUse element into the xml
</span>    <span class='id identifier rubyid_add_fields_from_map'>add_fields_from_map</span><span class='lparen'>(</span><span class='id identifier rubyid_resource_use_map'>resource_use_map</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fields</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_os_results'>os_results</span><span class='comma'>,</span> <span class='id identifier rubyid_resource_use_xml'>resource_use_xml</span><span class='rparen'>)</span>

    <span class='comment'># Add ResourceUse to array
</span>    <span class='ivar'>@resource_uses</span> <span class='op'>&lt;&lt;</span> <span class='const'><span class='object_link'><a href="../BuildingSync.html" title="BuildingSync (module)">BuildingSync</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="ResourceUse.html" title="BuildingSync::ResourceUse (class)">ResourceUse</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="ResourceUse.html#initialize-instance_method" title="BuildingSync::ResourceUse#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_resource_use_xml'>resource_use_xml</span><span class='comma'>,</span> <span class='ivar'>@ns</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="os_gather_results-instance_method">
  
    #<strong>os_gather_results</strong>(year_val)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


376
377
378
379
380
381
382
383
384
385</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 376</span>

<span class='kw'>def</span> <span class='id identifier rubyid_os_gather_results'>os_gather_results</span><span class='lparen'>(</span><span class='id identifier rubyid_year_val'>year_val</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_simulation_success?'>simulation_success?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_results_available_and_correct_units?'>results_available_and_correct_units?</span>
    <span class='id identifier rubyid_os_parse_annual_results'>os_parse_annual_results</span>
    <span class='id identifier rubyid_os_parse_monthly_all_end_uses_results'>os_parse_monthly_all_end_uses_results</span><span class='lparen'>(</span><span class='id identifier rubyid_year_val'>year_val</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_simulation_success?'>simulation_success?</span>
    <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Error</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.Scenario.os_gather_results</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Scenario ID: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_xget_id'>xget_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>. Unable to gather results as simulation was unsuccessful.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_results_available_and_correct_units?'>results_available_and_correct_units?</span>
    <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Error</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.Scenario.os_gather_results</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Scenario ID: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_xget_id'>xget_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>. Unable to gather results as results are not available.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="os_parse_annual_results-instance_method">
  
    #<strong>os_parse_annual_results</strong>(results = @results_json)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


387
388
389
390</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 387</span>

<span class='kw'>def</span> <span class='id identifier rubyid_os_parse_annual_results'>os_parse_annual_results</span><span class='lparen'>(</span><span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='ivar'>@results_json</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_os_add_resource_uses'>os_add_resource_uses</span><span class='lparen'>(</span><span class='id identifier rubyid_results'>results</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_os_add_all_resource_totals'>os_add_all_resource_totals</span><span class='lparen'>(</span><span class='id identifier rubyid_results'>results</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="os_parse_monthly_all_end_uses_results-instance_method">
  
    #<strong>os_parse_monthly_all_end_uses_results</strong>(year_val = Date.today.year, results = @results_json)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 392</span>

<span class='kw'>def</span> <span class='id identifier rubyid_os_parse_monthly_all_end_uses_results'>os_parse_monthly_all_end_uses_results</span><span class='lparen'>(</span><span class='id identifier rubyid_year_val'>year_val</span> <span class='op'>=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_today'>today</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span><span class='comma'>,</span> <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='ivar'>@results_json</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_results_available_and_correct_units?'>results_available_and_correct_units?</span><span class='lparen'>(</span><span class='id identifier rubyid_results'>results</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_time_series_data_xml'>time_series_data_xml</span> <span class='op'>=</span> <span class='id identifier rubyid_xget_or_create'>xget_or_create</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>TimeSeriesData</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_resource_use_map'>resource_use_map</span> <span class='op'>=</span> <span class='ivar'>@bsync_openstudio_resources_map</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>IP</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ResourceUse</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_os_results'>os_results</span> <span class='op'>=</span> <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>OpenStudioResults</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_get_all_end_use_resource_uses'>get_all_end_use_resource_uses</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_resource_use'>resource_use</span><span class='op'>|</span>
      <span class='id identifier rubyid_resource_use_hash'>resource_use_hash</span> <span class='op'>=</span> <span class='id identifier rubyid_resource_use_map'>resource_use_map</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_h'>h</span><span class='op'>|</span> <span class='id identifier rubyid_h'>h</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>EnergyResource</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_resource_use'>resource_use</span><span class='period'>.</span><span class='id identifier rubyid_xget_text'>xget_text</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>EnergyResource</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_h'>h</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>EndUse</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>All end uses</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_resource_use_hash'>resource_use_hash</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Error</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.Scenario.os_parse_monthly_all_end_uses_results</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Scenario ID: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_xget_id'>xget_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>: Unable to find mapping for ResourceUse: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_resource_use'>resource_use</span><span class='period'>.</span><span class='id identifier rubyid_xget_id'>xget_id</span><span class='embexpr_end'>}</span><span class='tstring_content'> and &#39;All end uses&#39;. Cannot parse monthly results</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_monthly_text'>monthly_text</span> <span class='op'>=</span> <span class='id identifier rubyid_resource_use_hash'>resource_use_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>monthly</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>text</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_monthly_units'>monthly_units</span> <span class='op'>=</span> <span class='id identifier rubyid_resource_use_hash'>resource_use_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>monthly</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>os_results_unit</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_native_units'>native_units</span> <span class='op'>=</span> <span class='ivar'>@native_units_map</span><span class='lbracket'>[</span><span class='id identifier rubyid_resource_use'>resource_use</span><span class='period'>.</span><span class='id identifier rubyid_xget_text'>xget_text</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>EnergyResource</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rbracket'>]</span>
        <span class='lparen'>(</span><span class='int'>1</span><span class='op'>..</span><span class='int'>12</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_month'>month</span><span class='op'>|</span>
          <span class='id identifier rubyid_start_date_time'>start_date_time</span> <span class='op'>=</span> <span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_year_val'>year_val</span><span class='comma'>,</span> <span class='id identifier rubyid_month'>month</span><span class='comma'>,</span> <span class='int'>1</span><span class='rparen'>)</span>

          <span class='comment'># substitues [month] with oct, for example, so we get electricity_ip_oct
</span>          <span class='id identifier rubyid_key_to_find'>key_to_find</span> <span class='op'>=</span> <span class='id identifier rubyid_monthly_text'>monthly_text</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>[month]</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_start_date_time'>start_date_time</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%b</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='rparen'>)</span>
          <span class='kw'>if</span> <span class='id identifier rubyid_os_results'>os_results</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='id identifier rubyid_key_to_find'>key_to_find</span><span class='rparen'>)</span>
            <span class='comment'># We always use the first day of the month as the start day
</span>            <span class='id identifier rubyid_time_series_xml'>time_series_xml</span> <span class='op'>=</span> <span class='const'>REXML</span><span class='op'>::</span><span class='const'>Element</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:TimeSeries</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_time_series_data_xml'>time_series_data_xml</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_time_series_xml'>time_series_xml</span><span class='period'>.</span><span class='id identifier rubyid_add_attribute'>add_attribute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ID</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>TS-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_start_date_time'>start_date_time</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%b</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span><span class='embexpr_end'>}</span><span class='tstring_content'>-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_resource_use'>resource_use</span><span class='period'>.</span><span class='id identifier rubyid_xget_id'>xget_id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

            <span class='comment'># Convert value to correct units
</span>            <span class='id identifier rubyid_interval_reading_value'>interval_reading_value</span> <span class='op'>=</span> <span class='id identifier rubyid_help_convert'>help_convert</span><span class='lparen'>(</span><span class='id identifier rubyid_os_results'>os_results</span><span class='lbracket'>[</span><span class='id identifier rubyid_key_to_find'>key_to_find</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_monthly_units'>monthly_units</span><span class='comma'>,</span> <span class='id identifier rubyid_native_units'>native_units</span><span class='rparen'>)</span>

            <span class='comment'># Create new TimeSeries element
</span>            <span class='id identifier rubyid_ts'>ts</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../BuildingSync.html" title="BuildingSync (module)">BuildingSync</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="TimeSeries.html" title="BuildingSync::TimeSeries (class)">TimeSeries</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="TimeSeries.html#initialize-instance_method" title="BuildingSync::TimeSeries#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_time_series_xml'>time_series_xml</span><span class='comma'>,</span> <span class='ivar'>@ns</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_ts'>ts</span><span class='period'>.</span><span class='id identifier rubyid_set_monthly_energy_reading'>set_monthly_energy_reading</span><span class='lparen'>(</span><span class='id identifier rubyid_start_date_time'>start_date_time</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span><span class='comma'>,</span> <span class='id identifier rubyid_interval_reading_value'>interval_reading_value</span><span class='comma'>,</span> <span class='id identifier rubyid_resource_use'>resource_use</span><span class='period'>.</span><span class='id identifier rubyid_xget_id'>xget_id</span><span class='rparen'>)</span>

          <span class='kw'>else</span>
            <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Error</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.Scenario.os_parse_monthly_all_end_uses_results</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Scenario ID: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_xget_id'>xget_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>: Key </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key_to_find'>key_to_find</span><span class='embexpr_end'>}</span><span class='tstring_content'> not found in results[&#39;OpenStudioResults&#39;].  Make sure monthly data is being output by os_results measure</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
          <span class='kw'>end</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Error</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.WorkflowMaker.get_timeseries_element</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Cannot add monthly report values to the BldgSync file since it is missing.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="osw_mkdir_p-instance_method">
  
    #<strong>osw_mkdir_p</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Create the @osw_dir</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


249
250
251
252
253
254
255
256</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 249</span>

<span class='kw'>def</span> <span class='id identifier rubyid_osw_mkdir_p'>osw_mkdir_p</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='ivar'>@osw_dir</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_mkdir_p'>mkdir_p</span><span class='lparen'>(</span><span class='ivar'>@osw_dir</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Error</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.Scenario.osw_mkdir_p</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Scenario ID: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_xget_id'>xget_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>.  @osw_dir must be set first</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>StandardError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>BuildingSync.Scenario.osw_mkdir_p Scenario ID: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_xget_id'>xget_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>.  @osw_dir must be set first</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pom?-instance_method">
  
    #<strong>pom?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


601
602
603
604
605
606</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 601</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pom?'>pom?</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_xget_element'>xget_element</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ScenarioType</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>return</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_check_scenario_type'>check_scenario_type</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>./</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:PackageOfMeasures</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="read_all_resource_totals-instance_method">
  
    #<strong>read_all_resource_totals</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


560
561
562
563
564
565
566
567</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 560</span>

<span class='kw'>def</span> <span class='id identifier rubyid_read_all_resource_totals'>read_all_resource_totals</span>
  <span class='id identifier rubyid_all_resource_total'>all_resource_total</span> <span class='op'>=</span> <span class='ivar'>@base_xml</span><span class='period'>.</span><span class='id identifier rubyid_get_elements'>get_elements</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>./</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:AllResourceTotals/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:AllResourceTotal</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_all_resource_total'>all_resource_total</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_all_resource_total'>all_resource_total</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_all_resource_total'>all_resource_total</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_art'>art</span><span class='op'>|</span>
      <span class='ivar'>@all_resource_totals</span> <span class='op'>&lt;&lt;</span> <span class='const'><span class='object_link'><a href="../BuildingSync.html" title="BuildingSync (module)">BuildingSync</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="AllResourceTotal.html" title="BuildingSync::AllResourceTotal (class)">AllResourceTotal</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="AllResourceTotal.html#initialize-instance_method" title="BuildingSync::AllResourceTotal#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_art'>art</span><span class='comma'>,</span> <span class='ivar'>@ns</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="read_resource_uses-instance_method">
  
    #<strong>read_resource_uses</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


551
552
553
554
555
556
557
558</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 551</span>

<span class='kw'>def</span> <span class='id identifier rubyid_read_resource_uses'>read_resource_uses</span>
  <span class='id identifier rubyid_resource_use'>resource_use</span> <span class='op'>=</span> <span class='ivar'>@base_xml</span><span class='period'>.</span><span class='id identifier rubyid_get_elements'>get_elements</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>./</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:ResourceUses/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:ResourceUse</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_resource_use'>resource_use</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_resource_use'>resource_use</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_resource_use'>resource_use</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_ru'>ru</span><span class='op'>|</span>
      <span class='ivar'>@resource_uses</span> <span class='op'>&lt;&lt;</span> <span class='const'><span class='object_link'><a href="../BuildingSync.html" title="BuildingSync (module)">BuildingSync</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="ResourceUse.html" title="BuildingSync::ResourceUse (class)">ResourceUse</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="ResourceUse.html#initialize-instance_method" title="BuildingSync::ResourceUse#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_ru'>ru</span><span class='comma'>,</span> <span class='ivar'>@ns</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="read_time_series_data-instance_method">
  
    #<strong>read_time_series_data</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


569
570
571
572
573
574
575
576</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 569</span>

<span class='kw'>def</span> <span class='id identifier rubyid_read_time_series_data'>read_time_series_data</span>
  <span class='id identifier rubyid_time_series'>time_series</span> <span class='op'>=</span> <span class='ivar'>@base_xml</span><span class='period'>.</span><span class='id identifier rubyid_get_elements'>get_elements</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>./</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:TimeSeriesData/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:TimeSeries</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_time_series'>time_series</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_time_series'>time_series</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_time_series'>time_series</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_ts'>ts</span><span class='op'>|</span>
      <span class='ivar'>@time_series_data</span> <span class='op'>&lt;&lt;</span> <span class='const'><span class='object_link'><a href="../BuildingSync.html" title="BuildingSync (module)">BuildingSync</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="TimeSeries.html" title="BuildingSync::TimeSeries (class)">TimeSeries</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="TimeSeries.html#initialize-instance_method" title="BuildingSync::TimeSeries#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_ts'>ts</span><span class='comma'>,</span> <span class='ivar'>@ns</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="read_xml-instance_method">
  
    #<strong>read_xml</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


163
164
165
166
167
168</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 163</span>

<span class='kw'>def</span> <span class='id identifier rubyid_read_xml'>read_xml</span>
  <span class='comment'># Read in data about ResourceUses, AllResourceTotals, and TimeSeriesData
</span>  <span class='id identifier rubyid_read_resource_uses'>read_resource_uses</span>
  <span class='id identifier rubyid_read_all_resource_totals'>read_all_resource_totals</span>
  <span class='id identifier rubyid_read_time_series_data'>read_time_series_data</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="results_available_and_correct_units?-instance_method">
  
    #<strong>results_available_and_correct_units?</strong>(results = @results_json)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 352</span>

<span class='kw'>def</span> <span class='id identifier rubyid_results_available_and_correct_units?'>results_available_and_correct_units?</span><span class='lparen'>(</span><span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='ivar'>@results_json</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_results_available'>results_available</span> <span class='op'>=</span> <span class='kw'>true</span>

  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>if</span> <span class='ivar'>@results_json</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>units</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SI</span><span class='tstring_end'>&#39;</span></span>
      <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Error</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.Scenario.results_available_and_correct_units?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Scenario ID: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_xget_id'>xget_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>. Only able to process IP results.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_results_available'>results_available</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>end</span>
  <span class='kw'>elsif</span> <span class='op'>!</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_get_osw_dir'>get_osw_dir</span><span class='comma'>,</span> <span class='ivar'>@results_file_name</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_results_available'>results_available</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Error</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.Scenario.results_available_and_correct_units?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Scenario ID: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_xget_id'>xget_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>.  Unable to gather results: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_results_file'>results_file</span><span class='embexpr_end'>}</span><span class='tstring_content'> does not exist.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_results_file'>results_file</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_get_osw_dir'>get_osw_dir</span><span class='comma'>,</span> <span class='ivar'>@results_file_name</span><span class='rparen'>)</span>
    <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_results_file'>results_file</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
      <span class='ivar'>@results_json</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='ivar'>@results_json</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>units</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SI</span><span class='tstring_end'>&#39;</span></span>
      <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Error</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.Scenario.results_available_and_correct_units?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Scenario ID: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_xget_id'>xget_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>. Only able to process IP results.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_results_available'>results_available</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_results_available'>results_available</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_main_output_dir-instance_method">
  
    #<strong>set_main_output_dir</strong>(main_output_dir)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


233
234
235
236</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 233</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_main_output_dir'>set_main_output_dir</span><span class='lparen'>(</span><span class='id identifier rubyid_main_output_dir'>main_output_dir</span><span class='rparen'>)</span>
  <span class='ivar'>@main_output_dir</span> <span class='op'>=</span> <span class='id identifier rubyid_main_output_dir'>main_output_dir</span>
  <span class='kw'>return</span> <span class='ivar'>@main_output_dir</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_osw_dir-instance_method">
  
    #<strong>set_osw_dir</strong>(main_output_dir = @main_output_dir)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


238
239
240
241
242
243
244
245
246</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 238</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_osw_dir'>set_osw_dir</span><span class='lparen'>(</span><span class='id identifier rubyid_main_output_dir'>main_output_dir</span> <span class='op'>=</span> <span class='ivar'>@main_output_dir</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_xget_name'>xget_name</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_to_use'>to_use</span> <span class='op'>=</span> <span class='id identifier rubyid_xget_name'>xget_name</span>
  <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_xget_id'>xget_id</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_to_use'>to_use</span> <span class='op'>=</span> <span class='id identifier rubyid_xget_id'>xget_id</span>
  <span class='kw'>end</span>
  <span class='ivar'>@osw_dir</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_main_output_dir'>main_output_dir</span><span class='comma'>,</span> <span class='id identifier rubyid_to_use'>to_use</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='ivar'>@osw_dir</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_workflow-instance_method">
  
    #<strong>set_workflow</strong>(workflow)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>workflow</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a hash of the openstudio workflow</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


224
225
226
227
228
229
230
231</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 224</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_workflow'>set_workflow</span><span class='lparen'>(</span><span class='id identifier rubyid_workflow'>workflow</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_workflow'>workflow</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
    <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Error</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.Scenario.set_workflow</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Scenario ID: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_xget_id'>xget_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>.  Cannot set_workflow, argument must be a Hash.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>StandardError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>BuildingSync.Scenario.set_workflow Scenario ID: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_xget_id'>xget_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>.  Cannot set_workflow, argument must be a Hash, not a </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_workflow'>workflow</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='ivar'>@workflow</span> <span class='op'>=</span> <span class='id identifier rubyid_workflow'>workflow</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="simulation_success?-instance_method">
  
    #<strong>simulation_success?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Check that the simulation was completed successfully.  We check:</p>
<ul><li>
<p>out.osw completed_status == &#39;Success&#39;</p>
</li><li>
<p>finished.job file exists</p>
</li><li>
<p>failed.job file doesn&#39;t exist</p>
</li><li>
<p>eplusout.end and eplusout.err files</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 296</span>

<span class='kw'>def</span> <span class='id identifier rubyid_simulation_success?'>simulation_success?</span>
  <span class='id identifier rubyid_success'>success</span> <span class='op'>=</span> <span class='kw'>true</span>

  <span class='comment'># Check out.osw
</span>  <span class='id identifier rubyid_out_osw_file'>out_osw_file</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_get_osw_dir'>get_osw_dir</span><span class='comma'>,</span> <span class='ivar'>@out_osw_file_name</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='id identifier rubyid_out_osw_file'>out_osw_file</span><span class='rparen'>)</span>
    <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Error</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.Scenario.simulation_success?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Scenario ID: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_xget_id'>xget_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>.  </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_out_osw_file'>out_osw_file</span><span class='embexpr_end'>}</span><span class='tstring_content'> does not exist.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_out_osw_file'>out_osw_file</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
      <span class='ivar'>@out_osw_json</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='ivar'>@out_osw_json</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>completed_status</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Success</span><span class='tstring_end'>&#39;</span></span>
      <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Info</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.Scenario.simulation_success?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Scenario ID: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_xget_id'>xget_id</span><span class='embexpr_end'>}</span><span class='tstring_content'> successfully completed.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_success'>success</span> <span class='op'>=</span> <span class='kw'>false</span>
      <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Error</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.Scenario.simulation_success?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Scenario ID: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_xget_id'>xget_id</span><span class='embexpr_end'>}</span><span class='tstring_content'> unsuccessful.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>

  <span class='kw'>end</span>

  <span class='comment'># Check for finished.job
</span>  <span class='id identifier rubyid_finished_job'>finished_job</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_get_osw_dir'>get_osw_dir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>finished.job</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='id identifier rubyid_finished_job'>finished_job</span><span class='rparen'>)</span>
    <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Error</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.Scenario.simulation_success?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Scenario ID: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_xget_id'>xget_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>: finished.job does not exist, simulation unsuccessful.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_success'>success</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>end</span>

  <span class='comment'># Check for failed.job
</span>  <span class='id identifier rubyid_failed_job'>failed_job</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_get_osw_dir'>get_osw_dir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>failed.job</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='id identifier rubyid_failed_job'>failed_job</span><span class='rparen'>)</span>
    <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Error</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.Scenario.simulation_success?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Scenario ID: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_xget_id'>xget_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>: failed.job exists, simulation unsuccessful.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_success'>success</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>end</span>

  <span class='comment'># Check eplusout.end and eplusout.err files
</span>  <span class='id identifier rubyid_end_file'>end_file</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_get_osw_dir'>get_osw_dir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>eplusout.end</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='id identifier rubyid_end_file'>end_file</span><span class='rparen'>)</span>
    <span class='comment'># we open the .end file to determine if EnergyPlus was successful or not
</span>    <span class='id identifier rubyid_energy_plus_string'>energy_plus_string</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_end_file'>end_file</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='symbol'>:readline</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_energy_plus_string'>energy_plus_string</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Fatal Error Detected</span><span class='tstring_end'>&#39;</span></span>
      <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Error</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.Scenario.simulation_success?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Scenario ID: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_xget_id'>xget_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>: eplusout.end detected error, simulation unsuccessful: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_energy_plus_string'>energy_plus_string</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_success'>success</span> <span class='op'>=</span> <span class='kw'>false</span>
      <span class='comment'># if we found out that there was a fatal error we search the err file for the first error.
</span>      <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_scenario'>scenario</span><span class='period'>.</span><span class='id identifier rubyid_get_osw_dir'>get_osw_dir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>eplusout.err</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_line'>line</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>** Severe  **</span><span class='tstring_end'>&#39;</span></span>
          <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Error</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.Scenario.simulation_success?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Scenario ID: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_xget_id'>xget_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>: Severe error occurred! </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_line'>line</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='kw'>elsif</span> <span class='id identifier rubyid_line'>line</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>**  Fatal  **</span><span class='tstring_end'>&#39;</span></span>
          <span class='const'>OpenStudio</span><span class='period'>.</span><span class='id identifier rubyid_logFree'>logFree</span><span class='lparen'>(</span><span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Error</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BuildingSync.Scenario.simulation_success?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Scenario ID: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_xget_id'>xget_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>: Fatal error occurred! </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_line'>line</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_success'>success</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="target?-instance_method">
  
    #<strong>target?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


608
609
610
611
612
613</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 608</span>

<span class='kw'>def</span> <span class='id identifier rubyid_target?'>target?</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_xget_element'>xget_element</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ScenarioType</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>return</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_check_scenario_type'>check_scenario_type</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>./</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ns</span><span class='embexpr_end'>}</span><span class='tstring_content'>:Target</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="write_osw-instance_method">
  
    #<strong>write_osw</strong>(main_output_dir = @main_output_dir)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Use the @workflow definition to write a new &#39; in.osw &#39; file. The
main_output_dir and osw_dir are set and created if not existing.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>main_output_dir</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>@main_output_dir</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>path to the main output directory to use</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


261
262
263
264
265
266
267
268
269
270</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/buildingsync/scenario.rb', line 261</span>

<span class='kw'>def</span> <span class='id identifier rubyid_write_osw'>write_osw</span><span class='lparen'>(</span><span class='id identifier rubyid_main_output_dir'>main_output_dir</span> <span class='op'>=</span> <span class='ivar'>@main_output_dir</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_set_main_output_dir'>set_main_output_dir</span><span class='lparen'>(</span><span class='id identifier rubyid_main_output_dir'>main_output_dir</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_set_osw_dir'>set_osw_dir</span><span class='lparen'>(</span><span class='id identifier rubyid_main_output_dir'>main_output_dir</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_osw_mkdir_p'>osw_mkdir_p</span>
  <span class='comment'># write the osw
</span>  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='ivar'>@osw_dir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>in.osw</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
    <span class='id identifier rubyid_file'>file</span> <span class='op'>&lt;&lt;</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_pretty_generate'>pretty_generate</span><span class='lparen'>(</span><span class='ivar'>@workflow</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon May 10 23:30:09 2021 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.26 (ruby-2.5.9).
</div>

    </div>
  </body>
</html>