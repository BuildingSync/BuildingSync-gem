<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.34
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "README";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'>
<h1 id="label-BuildingSync">BuildingSync</h1>

<p><img src="https://github.com/BuildingSync/BuildingSync-gem/actions/workflows/continuous_integration.yml/badge.svg?branch=develop"></p>

<p>The BuildingSync-Gem is a repository of helpers for reading and writing BuildingSync XML files, and for using that data to drive energy simulations of the subject building. See full documentation <a href="https://buildingsync-gem.buildingsync.net">here</a>.</p>

<p>All of the following are supported:</p>
<ul><li>
<p>convert BuildingSync XML file into:</p>
<ul><li>
<p>an OpenStudio Baseline model</p>
</li><li>
<p>an OpenStudio workflow for each scenario defined in the XML file</p>
</li></ul>
</li><li>
<p>enable simulation of the baseline model and all workflows and</p>
</li><li>
<p>insert simulation results back into the Building XML file.</p>
</li></ul>

<h2 id="label-Installation">Installation</h2>

<p>The BuildingSync Gem requires installation of OpenStudio, specifically <a href="https://openstudio-builds.s3.amazonaws.com/index.html?prefix=3.4.0/">OpenStudio v3.4.0</a>. The newer versions of OpenStudio have minor breaking changes that have not been addressed in this repository yet. After OpenStudio is installed, then export the path of the folder that contains the openstudio.rb file to RUBYLIB environment variable (e.g., <code>export RUBYLIB=/Applications/OpenStudio-3.4.0/Ruby</code>)</p>

<p>After installing OpenStudio and setting the environment variable, then add this line to your application&#39;s Gemfile: <code>ruby gem &#39;buildingsync&#39;, &#39;0.2.1&#39; </code></p>

<p>And then execute: <code>bash bundle install </code></p>

<p>Or install it yourself as: <code>bash gem install &#39;buildingsync&#39; </code></p>

<h2 id="label-Usage">Usage</h2>

<p>All of the features described above are provided by the translator class, as shown in the following sample code. There are also BuildingSync Gem example files in <a href="https://github.com/BuildingSync/BuildingSync-gem-examples">this repository</a>.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>buildingsync/translator</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_building_sync_xml_file_path'>building_sync_xml_file_path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>path/to/bsync.xml</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_out_path'>out_path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>path/to/output_dir</span><span class='tstring_end'>&#39;</span></span>

<span class='comment'># initializing the translator 
</span><span class='id identifier rubyid_translator'>translator</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="BuildingSync.html" title="BuildingSync (module)">BuildingSync</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="BuildingSync/Translator.html" title="BuildingSync::Translator (class)">Translator</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="BuildingSync/Translator.html#initialize-instance_method" title="BuildingSync::Translator#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_building_sync_xml_file_path'>building_sync_xml_file_path</span><span class='comma'>,</span> <span class='id identifier rubyid_out_path'>out_path</span><span class='rparen'>)</span>

<span class='comment'># generating the OpenStudio Model and writing the osm file.
</span><span class='comment'># path/to/output_dir/SR and path/to/output_dir/in.osm created
</span><span class='id identifier rubyid_translator'>translator</span><span class='period'>.</span><span class='id identifier rubyid_setup_and_sizing_run'>setup_and_sizing_run</span>

<span class='comment'># generating the OpenStudio workflows and writing the osw files
</span><span class='comment'># auc:Scenario elements with measures are turned into new simulation dirs
</span><span class='comment'># path/to/output_dir/scenario_name
</span><span class='id identifier rubyid_translator'>translator</span><span class='period'>.</span><span class='id identifier rubyid_write_osws'>write_osws</span>

<span class='comment'># run all simulations
</span><span class='id identifier rubyid_translator'>translator</span><span class='period'>.</span><span class='id identifier rubyid_run_osws'>run_osws</span>

<span class='comment'># gather the results for all scenarios found in out_path,
</span><span class='comment'># such as annual and monthly data for different energy
</span><span class='comment'># sources (electricity, natural gas, etc.)
</span><span class='id identifier rubyid_translator'>translator</span><span class='period'>.</span><span class='id identifier rubyid_gather_results'>gather_results</span><span class='lparen'>(</span><span class='id identifier rubyid_out_path'>out_path</span><span class='rparen'>)</span>

<span class='comment'># Add in UserDefinedFields, which contain information about the
</span><span class='comment'># OpenStudio model run 
</span><span class='id identifier rubyid_translator'>translator</span><span class='period'>.</span><span class='id identifier rubyid_prepare_final_xml'>prepare_final_xml</span>

<span class='comment'># write results to xml
</span><span class='comment'># default file name is &#39;results.xml&#39; 
</span><span class='id identifier rubyid_file_name'>file_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>abc-123.xml</span><span class='tstring_end'>&#39;</span></span> 
<span class='id identifier rubyid_translator'>translator</span><span class='period'>.</span><span class='id identifier rubyid_save_xml'>save_xml</span><span class='lparen'>(</span><span class='id identifier rubyid_file_name'>file_name</span><span class='rparen'>)</span>
</code></pre>

<h2 id="label-Testing">Testing</h2>

<p>Check out the repository and then execute:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_bundle'>bundle</span> <span class='id identifier rubyid_install'>install</span>
<span class='id identifier rubyid_bundle'>bundle</span> <span class='id identifier rubyid_exec'>exec</span> <span class='id identifier rubyid_rake'>rake</span>
</code></pre>

<h2 id="label-Documentation">Documentation</h2>

<p>The documentation of the BuildingSync-Gem is done with Yard (<a href="https://yardoc.org">yardoc.org</a>) To generate the documentation locally do the following:</p>

<pre class="code ruby"><code class="ruby">gem install yard
SITEMAP_BASEURL=https://buildingsync-gem.buildingsync.net bundle exec yard doc --plugin sitemap
</code></pre>

<p>Documentation for the develop branch is automatically released when code is merged into the branch.</p>

<h1 id="label-Releasing">Releasing</h1>
<ol><li>
<p>Update CHANGELOG.md</p>
</li><li>
<p>Run <code>bundle exec rake rubocop:auto_correct</code></p>
</li><li>
<p>Update version in <code>lib/buildingsync/version.rb</code></p>
</li><li>
<p>Create PR to main, after tests and reviews complete, then merge</p>
</li><li>
<p>Locally - from the main branch, run <code>bundle exec rake release</code></p>
</li><li>
<p>On GitHub, go to the releases page and update the latest release tag. Name it “Version x.y.z” and copy the CHANGELOG entry into the description box.</p>
</li></ol>

<h1 id="label-TODO">TODO</h1>
<ul><li>
<p>[ ] Support BuildingSync 2.3.0</p>
</li><li>
<p>[ ] Update to OpenStudio version 3.2.0</p>
</li></ul>
</div></div>

      <div id="footer">
  Generated on Wed Feb 14 22:41:06 2024 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.34 (ruby-2.7.8).
</div>

    </div>
  </body>
</html>